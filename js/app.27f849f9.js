(function(e){function t(t){for(var a,s,i=t[0],c=t[1],u=t[2],d=0,p=[];d<i.length;d++)s=i[d],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&p.push(r[s][0]),r[s]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);l&&l(t);while(p.length)p.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,i=1;i<n.length;i++){var c=n[i];0!==r[c]&&(a=!1)}a&&(o.splice(t--,1),e=s(s.s=n[0]))}return e}var a={},r={app:0},o=[];function s(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=a,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(n,a,function(t){return e[t]}.bind(null,a));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var l=c;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"000f":function(e,t,n){e.exports=n.p+"fonts/wizardspeak.007ed356.ttf"},"009c":function(e,t,n){e.exports=n.p+"img/book-open.555e3a34.png"},"0d27":function(e,t,n){},"0dc5":function(e,t,n){"use strict";var a=n("4ee3"),r=n.n(a);r.a},"0f7b":function(e,t,n){},1:function(e,t){},1096:function(e,t,n){e.exports=n.p+"img/foto_entrada.19572cd9.jpg"},1564:function(e,t,n){e.exports=n.p+"img/george_256.9197a081.png"},"18a2":function(e,t,n){e.exports=n.p+"img/cryptexA.eba9ba46.png"},2383:function(e,t,n){},2398:function(e,t,n){"use strict";var a=n("c75a"),r=n.n(a);r.a},"23d0":function(e,t,n){e.exports=n.p+"img/room09_whois.5a463b45.jpg"},"23ed":function(e,t,n){e.exports=n.p+"img/room22_sobre.d3474be2.png"},2460:function(e,t,n){e.exports=n.p+"img/room01.169687e7.jpg"},2595:function(e,t,n){e.exports=n.p+"img/room06_monedas.3668050f.png"},"29c0":function(e,t,n){e.exports=n.p+"img/watson_256.45d3af8e.png"},"2b1d":function(e,t,n){},"2e38":function(e,t,n){"use strict";var a=n("4859"),r=n.n(a);r.a},"2edd":function(e,t,n){e.exports=n.p+"img/room09.25b594bc.jpg"},"2fb0":function(e,t,n){"use strict";var a=n("8e56"),r=n.n(a);r.a},"30f4":function(e,t,n){e.exports=n.p+"img/room04_perspectiva.044617e1.png"},3153:function(e,t,n){e.exports=n.p+"img/room04.64d50e14.jpg"},3334:function(e,t,n){e.exports=n.p+"img/room22_carta.8044b560.png"},"34f6":function(e,t,n){},"3a5c":function(e,t,n){"use strict";var a=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(t,n){var a=e.call(this,n)||this;return a.type=t,a}return a(t,e),t}(Error);t.default=r},"425d":function(e,t,n){e.exports=n.p+"img/poirot_256.5b99d475.png"},4859:function(e,t,n){},"48d5":function(e,t,n){e.exports=n.p+"img/beajavi.f4cac671.png"},"495f":function(e,t,n){e.exports=n.p+"img/mulder_256.afa4bd31.png"},"4ee3":function(e,t,n){},"4f41":function(e,t,n){e.exports=n.p+"img/room03_pista.31a14014.png"},"4f77":function(e,t,n){},"521d":function(e,t,n){"use strict";n("4160"),n("a434"),n("159b"),Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(){this.callbacks={}}return e.prototype.add=function(e,t){var n=this,a=this.callbacks[e];return a||(a=[],this.callbacks[e]=a),a.push(t),function(){n.rm(e,t)}},e.prototype.rm=function(e,t){void 0===t&&(t=null);var n=this.callbacks[e];if(n)if(null!==t){for(var a=0;a<n.length;a++)if(n[a]===t)return void n.splice(a,1)}else n.splice(0,n.length)},e.prototype.rmAll=function(){for(var e in this.callbacks)this.rm(e)},e.prototype.run=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var a=this.callbacks[e];a&&a.forEach((function(e){return e.apply(void 0,t)}))},e}();t.default=a},"556b":function(e,t,n){e.exports=n.p+"img/room02_braile.4726e317.png"},"5ba7":function(e,t,n){e.exports=n.p+"img/room21_cartabea.08dd5cbe.png"},"5e95":function(e,t,n){e.exports=n.p+"img/walter_256.678b82e0.png"},"604b":function(e,t,n){"use strict";var a=n("d945"),r=n.n(a);r.a},6135:function(e,t,n){e.exports=n.p+"img/room07_emoji.fdeeb400.png"},"64c8":function(e,t,n){e.exports=n.p+"img/room21.250bb385.jpg"},"67ea":function(e,t,n){"use strict";var a=n("0d27"),r=n.n(a);r.a},"69a6":function(e,t,n){},"6a48":function(e,t,n){},"6a7e":function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=a(n("ca70"));t.ClientV0=r.default;var o=a(n("7fac"));t.ClientV1=o.default},"6ecc":function(e,t,n){e.exports=n.p+"img/room03.1c0a9d75.jpg"},"74e8":function(e,t,n){var a={"./george_256.png":"1564","./marple_256.png":"bb09","./mulder_256.png":"495f","./nico_256.png":"f3fd","./olivia_256.png":"d3a4","./poirot_256.png":"425d","./scully_256.png":"c6e2","./sherlock_256.png":"a309","./walter_256.png":"5e95","./watson_256.png":"29c0"};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=o,e.exports=r,r.id="74e8"},7805:function(e,t,n){var a={"./avatars/george_256.png":"1564","./avatars/marple_256.png":"bb09","./avatars/mulder_256.png":"495f","./avatars/nico_256.png":"f3fd","./avatars/olivia_256.png":"d3a4","./avatars/poirot_256.png":"425d","./avatars/scully_256.png":"c6e2","./avatars/sherlock_256.png":"a309","./avatars/walter_256.png":"5e95","./avatars/watson_256.png":"29c0","./base/logo.svg":"f166","./base/maze_background.png":"7b93","./base/maze_background_rotated.png":"b42a","./escape-test/book-closed.jpg":"8892","./escape-test/book-open.png":"009c","./fonts/Braille6-ANSI.ttf":"8fac","./fonts/wizardspeak.ttf":"000f","./puzzles/circuit.png":"ab85","./puzzles/combinationA.svg":"9906","./puzzles/combinationB.svg":"c513","./puzzles/cryptexA.png":"18a2","./puzzles/cryptexB.png":"e861","./puzzles/cryptexM.png":"dd06","./puzzles/laptop.png":"9c84","./sanjuan/beajavi.png":"48d5","./sanjuan/foto_entrada.jpg":"1096","./sanjuan/room00_anuario.png":"c715","./sanjuan/room00_cole.jpg":"96cf5","./sanjuan/room01.jpg":"2460","./sanjuan/room01_bookA.png":"bc5a","./sanjuan/room01_bookB.png":"f2dc","./sanjuan/room02.jpg":"94ae","./sanjuan/room02_blackboard.png":"bf17","./sanjuan/room02_braile.png":"556b","./sanjuan/room03.jpg":"6ecc","./sanjuan/room03_notas.png":"8d19","./sanjuan/room03_pista.png":"4f41","./sanjuan/room03_signos.png":"e390","./sanjuan/room04.jpg":"3153","./sanjuan/room04_perspectiva.png":"30f4","./sanjuan/room05.jpg":"c8b1","./sanjuan/room05_notebook.png":"c28e","./sanjuan/room05_tabla.png":"e906","./sanjuan/room06.jpg":"e018","./sanjuan/room06_monedas.png":"2595","./sanjuan/room06_paises.png":"f78f","./sanjuan/room07.jpg":"eea6","./sanjuan/room07_emoji.png":"6135","./sanjuan/room08.jpg":"fd45","./sanjuan/room08_clipboard.png":"b5dc","./sanjuan/room08_clipboard_mini.png":"95b5","./sanjuan/room09.jpg":"2edd","./sanjuan/room09_notebook.png":"a545","./sanjuan/room09_whois.jpg":"23d0","./sanjuan/room21.jpg":"64c8","./sanjuan/room21_cartabea.png":"5ba7","./sanjuan/room22_carta.png":"3334","./sanjuan/room22_sobre.png":"23ed"};function r(e){return Promise.resolve().then((function(){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}var r=a[e];return n(r)}))}r.keys=function(){return Object.keys(a)},r.id="7805",e.exports=r},"784a":function(e,t,n){"use strict";var a=n("69a6"),r=n.n(a);r.a},"7a9e":function(e,t,n){"use strict";var a=n("2b1d"),r=n.n(a);r.a},"7b93":function(e,t){e.exports="data:image/png;base64,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"},"7fac":function(e,t,n){"use strict";n("4160"),n("d81d"),n("b64b"),n("159b");var a=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},r.apply(this,arguments)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n("bc56")),i=o(n("ca70")),c=o(n("521d")),u=function(e){function t(t){var n=e.call(this,t)||this;return n.game_events=[],n._user_data_dict={},n.callbacks_ud=new c.default,n.callbacks_ev=new c.default,n}return a(t,e),t.prototype.emitUserData=function(e){var t=this._user_data_dict[this.user_id];t=r(r({},t),e),Object.keys(t).forEach((function(e){return void 0===t[e]?delete t[e]:{}})),this._user_data_dict[this.user_id]=t,this._emitCustom("user-data",e)},t.prototype.onUserData=function(e){return this.callbacks_ud.add("main",e)},t.prototype.offUserData=function(e){void 0===e&&(e=null),this.callbacks_ud.rm("main",e)},Object.defineProperty(t.prototype,"user_data",{get:function(){var e=this;return this.user_list.map((function(t){var n=e._user_data_dict[t];return n||(n={}),r({_user_id:t},n)}))},enumerable:!0,configurable:!0}),t.prototype.emitGameEvent=function(e){var t=s.default.generate().toLowerCase().substring(0,4),n="e-"+this.user_idx+"-"+this.game_events.length+"-"+t,a={event_id:n,user_id:this.user_id,data:e};this._emitCustom("game-event",a),this._addGameEvent(a)},t.prototype._addGameEvent=function(e){for(var t=this,n=e.event_id,a=e.user_id,r=e.data,o=0;o<this.game_events.length;o++)if(this.game_events[o].event_id===n)return;var s={event_id:n,user_id:a,processed:!1,data:r};this.game_events.push(s),this.game_events.forEach((function(e){e.processed||(e.processed=!0,t.callbacks_ev.run("main",e.data,e.user_id))}))},t.prototype.onGameEvent=function(e){return this.callbacks_ev.add("main",e)},t.prototype.offGameEvent=function(e){void 0===e&&(e=null),this.callbacks_ev.rm("main",e)},t.prototype._onCustom=function(t){var n=t.user_id,a=t.type,r=t.data;switch(a){case"user-data":return this._onUserData(n,r);case"game-event":return this._onGameEvent(n,r)}e.prototype._onCustom.call(this,t)},t.prototype._onUserData=function(e,t){var n=this._user_data_dict[e];n=r(r({},n),t),Object.keys(n).forEach((function(e){return void 0===n[e]?delete n[e]:{}})),this._user_data_dict[e]=n,this.callbacks_ud.run("main",this.user_data)},t.prototype._onGameEvent=function(e,t){this._addGameEvent(t)},t.prototype._onUserList=function(t){var n=this;e.prototype._onUserList.call(this,t);var a=this.user_data[this.user_idx];this.emitUserData(a),this.game_events.forEach((function(e){n._emitCustom("game-event",e)}))},t.prototype.disconnect=function(){this.callbacks_ev.rmAll(),this.callbacks_ud.rmAll(),e.prototype.disconnect.call(this)},t}(i.default);t.default=u},"82ad":function(e,t,n){},"87a0":function(e,t,n){},8892:function(e,t,n){e.exports=n.p+"img/book-closed.804330e6.jpg"},"8c25":function(e,t,n){"use strict";var a=n("e2d2"),r=n.n(a);r.a},"8d19":function(e,t,n){e.exports=n.p+"img/room03_notas.e5d95c7a.png"},"8e07":function(e,t,n){},"8e56":function(e,t,n){},"8fac":function(e,t,n){e.exports=n.p+"fonts/Braille6-ANSI.0b076a6a.ttf"},9275:function(e,t,n){"use strict";var a=n("e3f4"),r=n.n(a);r.a},"92e6":function(e,t,n){var a={"./avatars/george_256.png":"1564","./avatars/marple_256.png":"bb09","./avatars/mulder_256.png":"495f","./avatars/nico_256.png":"f3fd","./avatars/olivia_256.png":"d3a4","./avatars/poirot_256.png":"425d","./avatars/scully_256.png":"c6e2","./avatars/sherlock_256.png":"a309","./avatars/walter_256.png":"5e95","./avatars/watson_256.png":"29c0","./base/logo.svg":"f166","./base/maze_background.png":"7b93","./base/maze_background_rotated.png":"b42a","./escape-test/book-closed.jpg":"8892","./escape-test/book-open.png":"009c","./fonts/Braille6-ANSI.ttf":"8fac","./fonts/wizardspeak.ttf":"000f","./puzzles/circuit.png":"ab85","./puzzles/combinationA.svg":"9906","./puzzles/combinationB.svg":"c513","./puzzles/cryptexA.png":"18a2","./puzzles/cryptexB.png":"e861","./puzzles/cryptexM.png":"dd06","./puzzles/laptop.png":"9c84","./sanjuan/beajavi.png":"48d5","./sanjuan/foto_entrada.jpg":"1096","./sanjuan/room00_anuario.png":"c715","./sanjuan/room00_cole.jpg":"96cf5","./sanjuan/room01.jpg":"2460","./sanjuan/room01_bookA.png":"bc5a","./sanjuan/room01_bookB.png":"f2dc","./sanjuan/room02.jpg":"94ae","./sanjuan/room02_blackboard.png":"bf17","./sanjuan/room02_braile.png":"556b","./sanjuan/room03.jpg":"6ecc","./sanjuan/room03_notas.png":"8d19","./sanjuan/room03_pista.png":"4f41","./sanjuan/room03_signos.png":"e390","./sanjuan/room04.jpg":"3153","./sanjuan/room04_perspectiva.png":"30f4","./sanjuan/room05.jpg":"c8b1","./sanjuan/room05_notebook.png":"c28e","./sanjuan/room05_tabla.png":"e906","./sanjuan/room06.jpg":"e018","./sanjuan/room06_monedas.png":"2595","./sanjuan/room06_paises.png":"f78f","./sanjuan/room07.jpg":"eea6","./sanjuan/room07_emoji.png":"6135","./sanjuan/room08.jpg":"fd45","./sanjuan/room08_clipboard.png":"b5dc","./sanjuan/room08_clipboard_mini.png":"95b5","./sanjuan/room09.jpg":"2edd","./sanjuan/room09_notebook.png":"a545","./sanjuan/room09_whois.jpg":"23d0","./sanjuan/room21.jpg":"64c8","./sanjuan/room21_cartabea.png":"5ba7","./sanjuan/room22_carta.png":"3334","./sanjuan/room22_sobre.png":"23ed"};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=o,e.exports=r,r.id="92e6"},"94ae":function(e,t,n){e.exports=n.p+"img/room02.6d5cbc56.jpg"},"95b5":function(e,t,n){e.exports=n.p+"img/room08_clipboard_mini.42c3e27e.png"},"96cf5":function(e,t,n){e.exports=n.p+"img/room00_cole.c1e6f367.jpg"},9906:function(e,t,n){e.exports=n.p+"img/combinationA.53ccea3d.svg"},"9b8f":function(e,t,n){},"9c84":function(e,t,n){e.exports=n.p+"img/laptop.30fe3c5c.png"},a039:function(e,t,n){"use strict";var a=n("ebec"),r=n.n(a);r.a},a2bb:function(e,t,n){"use strict";var a=n("ec79"),r=n.n(a);r.a},a309:function(e,t,n){e.exports=n.p+"img/sherlock_256.c06ca234.png"},a545:function(e,t,n){e.exports=n.p+"img/room09_notebook.1ba00d58.png"},a5fb:function(e,t,n){"use strict";var a=n("c690"),r=n.n(a);r.a},a856:function(e,t,n){"use strict";var a=n("0f7b"),r=n.n(a);r.a},a8b3:function(e,t,n){"use strict";var a=n("6a48"),r=n.n(a);r.a},ab85:function(e,t,n){e.exports=n.p+"img/circuit.79d97511.png"},b008:function(e,t,n){"use strict";var a=n("8e07"),r=n.n(a);r.a},b355:function(e,t,n){"use strict";var a=n("4f77"),r=n.n(a);r.a},b42a:function(e,t,n){e.exports=n.p+"img/maze_background_rotated.1c47a306.png"},b5dc:function(e,t,n){e.exports=n.p+"img/room08_clipboard.ab8a684b.png"},bb09:function(e,t,n){e.exports=n.p+"img/marple_256.a4c5afd0.png"},bc5a:function(e,t,n){e.exports=n.p+"img/room01_bookA.ce06a4ac.png"},bd75:function(e,t,n){"use strict";var a=n("34f6"),r=n.n(a);r.a},bf17:function(e,t,n){e.exports=n.p+"img/room02_blackboard.0af659df.png"},bfdd:function(e,t,n){},c28e:function(e,t,n){e.exports=n.p+"img/room05_notebook.eb4ec539.png"},c513:function(e,t,n){e.exports=n.p+"img/combinationB.cade8e81.svg"},c690:function(e,t,n){},c6e2:function(e,t,n){e.exports=n.p+"img/scully_256.aba236af.png"},c715:function(e,t,n){e.exports=n.p+"img/room00_anuario.de083fb7.png"},c75a:function(e,t,n){},c8b1:function(e,t,n){e.exports=n.p+"img/room05.456fb901.jpg"},ca70:function(e,t,n){"use strict";n("a4d3"),n("e01a"),n("d28b"),n("a15b"),n("d3b7"),n("3ca3"),n("ddb0");var a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},a.apply(this,arguments)},r=this&&this.__awaiter||function(e,t,n,a){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(a.next(e))}catch(t){o(t)}}function i(e){try{c(a["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,i)}c((a=a.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,a,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(e){return function(t){return c([e,t])}}function c(o){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,a&&(r=2&o[0]?a["return"]:o[0]?a["throw"]||((r=a["return"])&&r.call(a),0):a.next)&&!(r=r.call(a,o[1])).done)return r;switch(a=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,a=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(r=s.trys,!(r=r.length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(i){o=[6,i],a=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},s=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var a=Array(e),r=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,i=o.length;s<i;s++,r++)a[r]=o[s];return a},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=i(n("c00c")),u=i(n("3a5c")),l=i(n("521d")),d=function(){function e(e,t){void 0===t&&(t={}),this.user_list=[],this.server=e,this.callbacks=new l.default,this.config=t}return e.prototype._connect=function(e,t,n){return void 0===t&&(t={}),r(this,void 0,void 0,(function(){var a=this;return o(this,(function(r){return[2,new Promise((function(r,o){var s=function(){a.disconnect(),o(new u.default("no_connection","No connection to server"))};a.socket=c.default(a.server),a.socket.on("user-list",a._onUserList.bind(a)),a.socket.on("custom",a._onCustom.bind(a)),a.socket.on("server-close",a._onServerClose.bind(a)),a.socket.on("connect_error",s),a.socket.emit(e,t,(function(e){if(e.error){var t=void 0;switch(e.error){case"bad_game":t="Trying to connect to bad game";break;case"full_game":t="The game is full";break;default:t="Unexpected error"}return a.disconnect(),void o(new u.default(e.error,t))}n(e),r()}))}))]}))}))},e.prototype.create=function(){return r(this,void 0,void 0,(function(){var e=this;return o(this,(function(t){return[2,this._connect("create",a({},this.config),(function(t){e.game_id=t.game_id,e.user_id=t.user_id,e.user_list=t.user_list}))]}))}))},e.prototype.join=function(e){return r(this,void 0,void 0,(function(){var t=this;return o(this,(function(n){return[2,this._connect("join",a({game_id:e},this.config),(function(e){t.game_id=e.game_id,t.user_id=e.user_id,t.user_list=e.user_list}))]}))}))},Object.defineProperty(e.prototype,"user_idx",{get:function(){for(var e=0;e<this.user_list.length;e++)if(this.user_list[e]===this.user_id)return e;return-1},enumerable:!0,configurable:!0}),e.prototype.on=function(e,t){return this.callbacks.add(e,t)},e.prototype.off=function(e,t){void 0===t&&(t=null),this.callbacks.rm(e,t)},e.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this._emitCustom("other",{channel:e,data:s(t)})},e.prototype.disconnect=function(){this.callbacks.rmAll(),this.socket.disconnect(!0)},e.prototype._onUserList=function(e){this.user_list=e.user_list},e.prototype._onCustom=function(e){var t=e.user_id,n=e.type,a=e.data;switch(n){case"other":return this._onOther(t,a)}},e.prototype._emitCustom=function(e,t){this.socket.emit("custom",{game_id:this.game_id,user_id:this.user_id,type:e,data:t})},e.prototype._onOther=function(e,t){var n,a=t.channel,r=t.data;(n=this.callbacks).run.apply(n,s([a],r))},e.prototype._onServerClose=function(){this.disconnect()},e}();t.default=d},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("15f5"),n("7051"),n("99af"),n("ac1f"),n("1276");var a=n("2909"),r=(n("4160"),n("a15b"),n("d81d"),n("159b"),n("b85c")),o=(n("96cf"),n("1da1")),s=n("15fd"),i=n("d4ec"),c=n("bee2"),u=(n("b0c0"),n("d3b7"),n("3ca3"),n("ddb0"),n("262e")),l=n("2caf"),d=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-5;Object(i["a"])(this,e),this.used=!1,this.id="hint-".concat(++e.current_id),this.msg=t,this.points=n,console.log("Created hint "+this.id)}return Object(c["a"])(e,[{key:"fake",value:function(){return this.msg.split("").map((function(e){return" "===e?e:"x"})).join("")}},{key:"useEvent",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("useHint.",this.id),e.next=3,I.current();case 3:t=e.sent,t.addEvent("useHint",this.id);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"use",value:function(){var e=this;this.used=!0,Object(o["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,I.current();case 2:n=t.sent,n.points+=e.points;case 4:case"end":return t.stop()}}),t)})))()}}]),e}();d.current_id=0;var p=function(){function e(t,n){Object(i["a"])(this,e),this.actions=[],this.solved=!1,this.hints=[],this.id="puz-".concat(++e.current_id),this.type=t,this.config=n}return Object(c["a"])(e,[{key:"add",value:function(e){e instanceof d?this.hints.push(e):this.actions.push(e)}},{key:"solveEvent",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("solveEvent.",this.id),e.next=3,I.current();case 3:t=e.sent,t.addEvent("solved",this.id);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"solve",value:function(e){if(this.solved)throw new Error("Puzzle already solved");this.solved=!0,this.actions.forEach((function(t){return t.run(e)}))}}]),e}();p.current_id=0;n("4de4"),n("2ca0");function f(e){return new Promise((function(t){return setTimeout(t,e)}))}n("25f0"),n("5319");function h(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16)}))}var m=!1,v=m?console.log:function(){},g=n("7805"),b=function(){function e(){Object(i["a"])(this,e)}return Object(c["a"])(e,null,[{key:"preload",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.preload_inner(n);case 1:if(e.files[n].finished){t.next=6;break}return t.next=4,f(100);case 4:t.next=1;break;case 6:case"end":return t.stop()}}),t,this)})));function n(e){return t.apply(this,arguments)}return n}()},{key:"preloadFolder",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,a,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=g.keys().filter((function(e){return e.startsWith("./".concat(t,"/"))})).map((function(e){return e.substr(2)})),a=n.map((function(e){return r.preload(e)})),e.next=4,Promise.all(a);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"preload_inner",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(n){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.files[n]){t.next=2;break}return t.abrupt("return");case 2:return a={finished:!1},e.files[n]=a,v("Preloading ".concat(n)),t.next=7,g("./"+n);case 7:if(r=t.sent,v("Preloading ".concat(n," -> ").concat(r)),!e.isSupported()){t.next=14;break}return t.next=12,this.preload_inner_regular(a,n,r);case 12:t.next=16;break;case 14:return t.next=16,this.preload_inner_ugly(a,n,r);case 16:case"end":return t.stop()}}),t,this)})));function n(e){return t.apply(this,arguments)}return n}()},{key:"preload_inner_regular",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n,a){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=document.createElement("link"),r.rel="preload",r.as=this.getLinkType(n),r.href=a,document.body.appendChild(r),r.onload=function(){v("Preloaded",n),t.finished=!0},r.onerror=function(e){console.error("Error preloading",n,e),t.finished=!0};case 7:case"end":return e.stop()}}),e,this)})));function t(t,n,a){return e.apply(this,arguments)}return t}()},{key:"getLinkType",value:function(e){var t=e.toLowerCase().split(".").pop();switch(t){case"ttf":return"font";default:return"image"}}},{key:"preload_inner_ugly",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n,a){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=this.getLinkType(n),e.t0=r,e.next="image"===e.t0?4:"font"===e.t0?7:10;break;case 4:return e.next=6,this.preload_inner_ugly_image(t,n,a);case 6:return e.abrupt("return",e.sent);case 7:return e.next=9,this.preload_inner_ugly_font(t,n,a);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e,this)})));function t(t,n,a){return e.apply(this,arguments)}return t}()},{key:"preload_inner_ugly_image",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n,a){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:v("Preload is not supported, using ugly alternative for image"),r=document.createElement("img"),r.src=a,r.onload=function(){v("Preloaded",n),t.finished=!0},r.onerror=function(e){console.error("Error preloading",n,e),t.finished=!0};case 5:case"end":return e.stop()}}),e)})));function t(t,n,a){return e.apply(this,arguments)}return t}()},{key:"preload_inner_ugly_font",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n,a){var r,o,s,i,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.warn("Preload is not supported, using ugly alternative for font"),t.finished=!0,r="preload-font-"+h(),o='\n            @font-face {\n                font-family: "'.concat(r,'";\n                src: url("').concat(a,'");\n            }\n        '),s=document.createElement("style"),document.head.appendChild(s),s.type="text/css",s.appendChild(document.createTextNode(o)),i=document.createElement("div"),c=document.createTextNode("abcefghijklmopqrstuvwxyz"),i.appendChild(c),i.style.cssText="font-family: ".concat(r,"; visibility: hidden;"),document.body.appendChild(i);case 13:case"end":return e.stop()}}),e)})));function t(t,n,a){return e.apply(this,arguments)}return t}()},{key:"isSupported",value:function(){var e=function(e,t){if(e&&e.supports)try{return e.supports(t)}catch(n){n instanceof TypeError?console.log("The DOMTokenList doesn't have a supported tokens list"):console.error("That shouldn't have happened")}};return!!e(document.createElement("link").relList,"preload")}}]),e}();b.files={};var A=n("92e6");function _(e){try{return A("./"+e)}catch(t){return console.error("Not found asset "+e),null}}var y=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Object(i["a"])(this,e),this.assets=[],this.url_prev=null,this.zoom=!1,this.used=!1,this.id="img-".concat(++e.current_id),this.url=_(t),this.assets.push(t),n&&(this.url_prev=_(n),this.assets.push(n),this.zoom=!0)}return Object(c["a"])(e,[{key:"preload",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.assets.map((function(e){return b.preload(e)})),e.next=3,Promise.all(t);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),e}();y.current_id=0;var j=function(){function e(t){Object(i["a"])(this,e),this.actions=[],this.id="but-".concat(++e.current_id),this.text=t}return Object(c["a"])(e,[{key:"add",value:function(e){this.actions.push(e)}},{key:"click",value:function(e){this.actions.forEach((function(t){return t.run(e)}))}}]),e}();j.current_id=0;var w=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"none";Object(i["a"])(this,e),this.type=t},k=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(e){var a;return Object(i["a"])(this,n),a=t.call(this,"text"),a.text=e,a}return n}(w),C=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(e){var a;return Object(i["a"])(this,n),a=t.call(this,"puzzle"),a.puzzle=e,a}return n}(w),O=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(e){var a;return Object(i["a"])(this,n),a=t.call(this,"image"),a.image=e,a}return n}(w),E=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(e){var a;return Object(i["a"])(this,n),a=t.call(this,"button"),a.button=e,a}return n}(w),x=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"closed";Object(i["a"])(this,e),this.content=[],this.id="rom-".concat(++e.current_id),this.name=t,this.status=n}return Object(c["a"])(e,[{key:"add",value:function(e){"string"!==typeof e?e instanceof p?this.content.push(new C(e)):e instanceof y?this.content.push(new O(e)):e instanceof j&&this.content.push(new E(e)):this.content.push(new k(e))}},{key:"getElement",value:function(e){var t,n=Object(r["a"])(this.content);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(a instanceof O&&e===a.image.id)return a.image;if(a instanceof C){if(e===a.puzzle.id)return a.puzzle;var o,s=Object(r["a"])(a.puzzle.hints);try{for(s.s();!(o=s.n()).done;){var i=o.value;if(e===i.id)return i}}catch(c){s.e(c)}finally{s.f()}}if(a instanceof E&&e===a.button.id)return a.button}}catch(c){n.e(c)}finally{n.f()}return null}},{key:"preload",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("Preload room"),t=[],this.content.forEach((function(e){e instanceof O&&(console.log("Wait for image",e),t.push(e.image.preload()))})),console.log("Preload room",t.length),e.next=6,Promise.all(t);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),e}();x.current_id=0;var B=function(){function e(){Object(i["a"])(this,e)}return Object(c["a"])(e,null,[{key:"localStorageAvailable",value:function(){try{var e=window.localStorage,t="__storage_test__";return e.setItem(t,t),e.removeItem(t),!0}catch(n){return!1}}}]),e}();B.id="EscapeRoom001A-v1",B.SERVER="https://multiplayer.javilabs.es";var R=n("6a7e"),I=function(){function e(){Object(i["a"])(this,e),this.id="",this.rooms=[],this.current_room=null,this.points=0,this.start=new Date,this.end=null,this.events=[],this.multiplayer=null,e.current_game=this}return Object(c["a"])(e,[{key:"add",value:function(e){if(e instanceof x)return this.current_room||(this.current_room=e),void this.rooms.push(e)}},{key:"changeRoom",value:function(e){this.current_room=e}},{key:"toData",value:function(){var e=null,t=null;if(this.multiplayer){e=this.multiplayer.game_id;var n=this.multiplayer.user_data[this.multiplayer.user_idx],a=(n._user_id,Object(s["a"])(n,["_user_id"]));t=a}return JSON.stringify({multiplayer_game_id:e,my_user_data:t,events:this.events,start:this.start.getTime(),end:this.end?this.end.getDate():null})}},{key:"fromData",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,a,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=JSON.parse(t),this.start=new Date(n.start),this.end=n.end?new Date(n.end):null,n.events.map((function(e){r.addEvent(e.type,e.data,!0)})),!n.multiplayer_game_id){e.next=11;break}return a=new R["ClientV1"](B.SERVER),e.next=8,a.join(n.multiplayer_game_id);case 8:this.join(a),a.emitUserData(n.my_user_data),this.save();case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"processEvent",value:function(e,t){if(console.log("Process event",e),"solved"===e.type){var n=this.getElement(e.data);if(!n)return void console.error("Unable to find element "+e.data);n.solve(t)}if("useHint"===e.type){var a=this.getElement(e.data);if(!a)return void console.error("Unable to find element "+e.data);a.use()}}},{key:"save",value:function(){B.localStorageAvailable()?(console.log("Save",this.toData()),localStorage.setItem(B.id+"-id",this.id),localStorage.setItem(B.id+"-data",this.toData())):console.warn("No local storage available")}},{key:"addEvent",value:function(e,t){var n=this,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i={type:e,data:t};console.log(i,this.events.map((function(e){return e})));var c,u=Object(r["a"])(this.events);try{for(u.s();!(c=u.n()).done;){var l=c.value;if(l.type===e&&l.data===t)return void console.log("Repeated event",i)}}catch(d){u.e(d)}finally{u.f()}this.events.push(i),this.save(),this.processEvent(i,a),Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n.multiplayer&&!s){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,f(50);case 4:n.multiplayer.emitGameEvent(i);case 5:case"end":return e.stop()}}),e)})))()}},{key:"getElement",value:function(e){var t,n=Object(r["a"])(this.rooms);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(a.id===e)return a;var o=a.getElement(e);if(o)return o}}catch(s){n.e(s)}finally{n.f()}return null}},{key:"join",value:function(e){var t=this;console.log("Game.join"),this.multiplayer=e,this.multiplayer.onGameEvent(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(n,a){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f(50);case 2:console.log(">>>>",n,"from",a,"me:",null===(r=t.multiplayer)||void 0===r?void 0:r.user_id),t.addEvent(n.type,n.data,!1,a);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),console.log("Multilyer events: ",e.game_events),e.game_events.forEach((function(e){t.addEvent(e.data.type,e.data.data,!0)})),this.save()}},{key:"finish",value:function(){this.end=new Date}}],[{key:"register",value:function(e,t){this.constructors[e]=t}},{key:"registerDefault",value:function(e,t){this.register(e,t),this.default_name=e}},{key:"new",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!e&&!this.default_name)throw new Error("No game specified");e||(e=this.default_name),x.current_id=0,p.current_id=0,d.current_id=0;var t=this.constructors[e];if(!t)throw new Error("There is no game named '".concat(e,"'"));var n=t();return n.id=e,n.save(),n}},{key:"current",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.current_game){e.next=2;break}return e.abrupt("return",this.current_game);case 2:if(!B.localStorageAvailable()){e.next=12;break}if(t=localStorage.getItem(B.id+"-id"),n=localStorage.getItem(B.id+"-data"),!t){e.next=10;break}return a=this.new(t),e.next=9,a.fromData(n);case 9:return e.abrupt("return",a);case 10:e.next=13;break;case 12:console.warn("No local storage available");case 13:return e.abrupt("return",null);case 14:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),e}();I.current_game=null,I.constructors={},I.default_name=null;var z=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";Object(i["a"])(this,e),this.content=[],this.title=t}return Object(c["a"])(e,[{key:"add",value:function(e){this.content.push(e)}}],[{key:"onMessage",value:function(e){this.callback=e}},{key:"show",value:function(e){this.callback&&this.callback(e)}}]),e}(),M=function(){function e(t,n){Object(i["a"])(this,e),this.room=t,this.action=n}return Object(c["a"])(e,[{key:"run",value:function(e){switch(this.action){case"open":this.room.status="open";break}}}]),e}(),S=function(){function e(t){Object(i["a"])(this,e),t instanceof z?this.msg=t:(this.msg=new z,this.msg.add(t))}return Object(c["a"])(e,[{key:"run",value:function(e){e||z.show(this.msg)}}]),e}(),Q=function(){function e(t){Object(i["a"])(this,e),this.room=t}return Object(c["a"])(e,[{key:"run",value:function(e){var t=this;Object(o["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,I.current();case 2:n=e.sent,n.changeRoom(t.room);case 4:case"end":return e.stop()}}),e)})))()}}]),e}(),D=function(){function e(t){Object(i["a"])(this,e),this.points=0,this.used=!1,this.points=t}return Object(c["a"])(e,[{key:"run",value:function(e){var t=this;this.used||Object(o["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,I.current();case 2:n=e.sent,n.points+=t.points,t.used=!0;case 5:case"end":return e.stop()}}),e)})))()}}]),e}(),N=function(){function e(t){Object(i["a"])(this,e),this.url=t}return Object(c["a"])(e,[{key:"run",value:function(e){e||window.open(this.url,"_blank")}}]),e}(),P=function(){function e(){Object(i["a"])(this,e)}return Object(c["a"])(e,[{key:"run",value:function(e){console.log("action end gammme"),Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,I.current();case 2:t=e.sent,t.finish();case 4:case"end":return e.stop()}}),e)})))()}}]),e}();I.registerDefault("sanjuan",(function(){var e,t,n,r=new I,o=new x("Entrada","open"),s=new x("Clase de Vega","open"),i=new x("Atención a la diversidad"),c=new x("Clase de Ángel"),u=new x("Clase de Goretti"),l=new x("Clase de Félix"),f=new x("Clase de Beatriz Martín"),h=new x("Clase de Beatriz Domingo"),m=new x("Clase de Laura"),v=new x("Clase de Ana Maria"),g=new x("Puerta del patio"),b=new x("Patio"),A=new x("Fin");return r.add(o),r.add(s),r.add(i),r.add(c),r.add(u),r.add(l),r.add(f),r.add(h),r.add(m),r.add(v),r.add(g),r.add(b),r.add(A),t=new y("sanjuan/room00_cole.jpg"),o.add(t),o.add("\n        Estamos en Junio de 2020, somos un grupo de alumnos de 4º E.S.O\n        del colegio San Juan de la Cruz.\n        Este es nuestro último curso en este colegio,\n        y esperamos ansiosos nuestra graduación.\n        Sin embargo, un virus, llamado COVID19, ha truncado nuestras expectativas\n        y se han anulado nuestras clases.\n    "),o.add("\n        En la tele escuchamos a diario, que no se podrán hacer grandes reuniones,\n        ¿Y nuestra graduación? Pues para guardar la distancia mínima y respetar el aforo máximo,\n        cuando llegue la tan ansiada “nueva normalidad”,\n        solo los que demostremos que hemos realizado todo nuestro paso por este estupendo centro con éxito,\n        conseguiremos entradas para tan esperado acontecimiento.\n        Para poder demostrarlo tendremos que conseguir nuestro diploma acreditativo,\n        que nos han escondido por el colegio.\n    "),o.add("\n        Comenzamos...   \n    "),t=new y("sanjuan/room00_anuario.png"),o.add(t),o.add("\n        No tenemos ninguna pista para empezar nuestra andadura,\n        tan solo contamos con un antiguo anuario, abierto por una de las páginas.\n        En esa página podemos ver como aparecen sonrientes alumnos de 2º E.I.,\n        tras pensar un rato, nos dirigimos a clase de VEGA, ya que ella es la tutora de ese curso.\n    "),e=new j("Entrar en clase de Vega"),e.add(new Q(s)),o.add(e),t=new y("sanjuan/room01.jpg"),s.add(t),s.add("\n        Encima de su mesa observamos la imagen de un Virgen María,\n        está claro que en el cole estaban preparando actividades\n        para este mes de Mayo\n        y a nuestro recuerdo viene la cantidad de ofrendas florales\n        que hemos hecho nosotros a la Virgen a lo largo de nuestra etapa en el Colegio.\n        Ya que la Pastoral ha estado siempre muy presente\n        en nuestro desarrollo como personas a lo largo de estos años.\n    "),s.add("\n        Junto a la mesa, se encuentra una caja cerrada, con una combinación numérica.\n        En el suelo encontramos un libro sobre trangram,\n        parece contener las instrucciones para descifrar la combinación.\n    "),t=new y("sanjuan/room01_bookB.png","sanjuan/room01_bookA.png"),s.add(t),n=new p("keypad",{code:"4132756",layout:[["1","2","3"],["4","5","6"],["7","8","9"],["","0","clear"]]}),n.add(new d("\n        La clave es el número de las piezas del tangram según están puestas\n        en a figura empezando de arriba a abajo y de izquierda a derecha,\n        en las piezas que son iguales con distintos número,\n        se pone primero el número más pequeño.\n    ")),n.add(new d("\n        La solución es 4132756\n    ")),s.add(n),n.add(new S("\n        Enhorabuena, has demostrado que eres hábil, y a pesar de la añoranza\n        que te ha causado volver a esas clases en las que aprendiste a leer,\n        has sido capaz de abrir esta caja.\n        Dentro de la caja se encuentra una llave, tras intentar abrir en todas\n        las puertas de esa planta,\n        te das cuenta que la única clase que se puede abrir,\n        es la de atención a la diversidad.\n    ")),n.add(new M(i,"open")),n.add(new D(10)),n.add(new Q(i)),t=new y("sanjuan/room02.jpg"),i.add(t),i.add("\n        Acabáis de entrar en el aula de atención a la diversidad,\n        aquí es donde Adela, Mª Jesús y Esperanza, con mucho mimo,\n        atienden a todos vuestros compañeros que lo necesitan,\n        porque en este cole, ningún alumno se queda atrás.\n\n        En la clase, hay un enorme armario, pero está cerrado,\n        para desbloquearlo necesitamos acertar con una palabra.\n        Nos fijamos que la pizarra contiene unos signos y una frase\n        medio borrada, ¿Qué querrá decir?\n    "),t=new y("sanjuan/room02_blackboard.png"),i.add(t),i.add("\n        Rebuscando un poco, vemos que encima de una estantería,\n        las profes tienen una enorme cartulina enmarcada\n        con signos muy parecidos a los anteriores."),t=new y("sanjuan/room02_braile.png"),i.add(t),n=new p("text",{code:"inclusion"}),i.add(n),n.add(new S("\n        Muy bien chicos, se nota que sabéis poneros en el lugar de vuestros\n        compañeros con necesidades especiales, dentro del armario,\n        hay una gran llave,\n        la probáis en todas las aulas del primer piso del cole,\n        y comprobáis que la clase que abre es la de 4º E.P.\n    ")),n.add(new M(c,"open")),n.add(new D(10)),n.add(new Q(c)),n.add(new d("\n        La clave es la palabra que está tachada,\n        usa el código Morse para saber de que palabra se trata.\n    ")),n.add(new d("\n        La solución es INCLUSION\n    ")),t=new y("sanjuan/room03.jpg"),c.add(t),c.add("\n        Entras en la clase y descubres que Ángel,\n        el profesor de Música ha dejado encendido su pc\n        que te pide una contraseña.\n        ¿Qué pretenderá que pongamos? \n        Te fijas en una de las paredes,\n        y te llama la atención un cartel que tiene colgado.\n    "),t=new y("sanjuan/room03_signos.png"),c.add(t),c.add("También observas, que en la pizarra, hay algo, escrito, se trata del siguiente pentagrama"),t=new y("sanjuan/room03_notas.png"),c.add(t),c.add("Un papel sobre la mesa parece contener una pista importante"),t=new y("sanjuan/room03_pista.png"),c.add(t),n=new p("laptop",{code:"relamido"}),n.add(new M(u,"open")),n.add(new D(10)),n.add(new Q(u)),n.add(new S("\n        Estupendo está claro que la Música es lo vuestro, y Ángel y Basulto\n        han inculcado en vosotros el amor hacia esta materia,\n        seguro que muchos de vosotros hasta habéis formado parte de la Escolanía,\n        pero no os relajeis, aún quedan muchas pruebas que pasar,\n        ahora toca cambiar de planta, pero antes de salir,\n        mirais con mucho cariño, las clases de Chus, Elsa y Dani,\n        que tan buenos ratos os han hecho pasar.\n        Al subir la rampa, unas voces llaman vuestra atención,\n        es Montse que está en secretaria hablando con Pablo,\n        vosotros seguís vuestro camino y entráis en Clase de Goretti.\n    ")),n.add(new d("\n        Primero debes descifrar la frase sustituyendo los símbolos\n        por las notas musicales a los que hacen referencia.\n        Cuando lo tengas, la clave es,\n        la palabra que forman las notas escritas en el pentagrama.\n    ")),n.add(new d("\n        La solución es RELAMIDO\n    ")),c.add(n),t=new y("sanjuan/room04.jpg"),u.add(t),u.add("\n        Ya estáis en la segunda planta, os encontráis en la clase de Goretti,\n        a pesar de todos los ordenadores que hay en este aula,\n        lo que más os llama la atención, es un póster que está colgado en la puerta.\n        En él hay varias perspectivas,\n        que tantas veces habéis practicado en clase de Educación Plástica y Visual.\n    "),t=new y("sanjuan/room04_perspectiva.png"),u.add(t),u.add("\n        Para poder avanzar tenéis que resolver el siguiente panel.\n    "),n=new p("keypad",{code:"CDFHIJ",layout:[[].concat(Object(a["a"])("ABCD".split("")),[""]),[].concat(Object(a["a"])("EFGH".split("")),[""]),[].concat(Object(a["a"])("IJKL".split("")),["clear"])]}),n.add(new M(l,"open")),n.add(new D(10)),n.add(new Q(l)),n.add(new S("\n        ¡Sois unos cracks!,\n        habéis conseguido demostrar que las destrezas plásticas\n        las tenéis superadas, Goretti y Patri se han encargado de ello,\n        pero ¿Y las lingüísticas?\n        Tenéis que dirigiros a clase de Félix para poder demostrarlo.\n    ")),u.add(n),n.add(new d("\n        La solución son las letras de las vistas que corresponden al cubo.\n    ")),n.add(new d("\n        La solución es CDFHIJ\n    ")),t=new y("sanjuan/room05.jpg"),l.add(t),l.add("\n        Ha llegado la hora de demostrar vuestra cultura literaria,\n        que con tanto mimo se han ocupado Ana Mª, Félix y Fran de inculcaros.\n        Sabemos que la comprensión lectora la tenéis más que superada,\n        pues así lo habéis demostrado en las pruebas de lectura eficaz,\n        que desde todas las áreas os hemos ido haciendo a lo largo de los trimestres.\n        También sabemos que muchos de vuestros padres han formado parte del\n        “Club de lectura de padres y madres”,\n        seguro que con todas estas armas, sois capaces de resolver\n        el siguiente enigma.\n    "),t=new y("sanjuan/room05_tabla.png"),l.add(t),t=new y("sanjuan/room05_notebook.png","sanjuan/room05_notebook.png"),l.add(t),l.add("\n        Suma el año de nacimiento de los andaluces y\n        réstale el año de nacimiento de los otros dos autores\n    "),n=new p("text",{code:"0076"}),l.add(n),n.add(new S("\n        Enhorabuena,\n        no sabéis lo felices que nos hace saber que además del graduado,\n        habéis conseguido convertiros en unas personas cultas\n        y amantes de la lectura.\n        La caja contenía una llave con el número 200,\n        que coincide con el aula de Beatriz M.\n    ")),n.add(new M(f,"open")),n.add(new D(10)),n.add(new Q(f)),n.add(new d("\n        Tienes que rellenar la tabla y\n        conseguir el año de nacimiento de los cuatro autores.\n        Cuando lo tengas tienes sumar la edad de\n        Federico García Lorca y Luis Cernuda\n        y restarle el año de nacimiento de José de Espronceda y Blas de Otero. \n    ")),n.add(new d("\n        La solución es 0076\n    ")),t=new y("sanjuan/room06.jpg"),f.add(t),f.add("\n        Entráis en la clase de Beatriz Martín, profesora de Economía,\n        veis que encima de la mesa, ha dejado olvidadas 4 monedas,\n        y os llama la atención que todas ellas están por el reverso,\n        y algunas muestran imágenes poco conocidas para vosotros.\n        ¿De qué países serán?\n    "),t=new y("sanjuan/room06_monedas.png"),f.add(t),f.add("\n        Observáis que el ordenador lo ha dejado encendido\n        y tiene abierta la página del BCE (Banco Central Europeo)\n    "),e=new j("Caras nacionales BCE"),e.add(new N("https://www.ecb.europa.eu/euro/coins/1euro/html/index.es.html")),f.add(e),f.add("\n       Un cartel muestra el año de entrada de todos los países a la UE.\n    "),t=new y("sanjuan/room06_paises.png"),f.add(t),f.add("\n       El criptex sobre la mesa parece tener algo en su interior\n    "),n=new p("cryptex",{code:"FIGE"}),f.add(n),n.add(new S("\n        Muy bien chicos, habéis sido capaces de resolver este enigma que no era nada fácil.\n        Ahora debéis poner a prueba vuestra competencia matemática,\n        para ello os dirigis a la clase de la otra tutora de 4º E.S.O, Bea Domingo.\n    ")),n.add(new M(h,"open")),n.add(new D(10)),n.add(new Q(h)),n.add(new d("\n        La Solución son las iniciales de los países que aparecen en las monedas,\n        ordenados por la fecha en la que se incorporaron a la UE.\n    ")),n.add(new d("\n        La solución es FIGE\n    ")),t=new y("sanjuan/room07.jpg"),h.add(t),h.add("\n        Entrais en la clase de Bea D, sin duda la profesora que más\n        sabe de Matemáticas de todo el centro, de la pizarra cuelga un mural,\n        lleno de emojis, que parece esconder la clave para poder seguir avanzando.\n    "),t=new y("sanjuan/room07_emoji.png"),h.add(t),n=new p("text",{code:"27"}),h.add(n),n.add(new S("\n        Buen trabajo chicos, cada vez estáis más cerca de conseguirlo,\n        ahora debéis subir al piso de arriba y seguir demostrando todo lo aprendido.\n        Antes de subir, os despedís de las clases de Guillermo, Sergio y Leti,\n        en las que tanto habéis aprendido a lo largo de todos estos años.\n        Subis a la primera última planta, intentáis abrir la clase de Javier,\n        pero está cerrada, pero la de enfrente, sí que está abierta.\n    ")),n.add(new M(m,"open")),n.add(new D(10)),n.add(new Q(m)),n.add(new d("\n        Tienes que resolver un sistema de 4 ecuaciones y 4 incógnitas,\n        y cuando tengas la soluciones de las incógnitas hacer la suma.\n    ")),n.add(new d("\n        La solución es 27\n    ")),t=new y("sanjuan/room08.jpg"),m.add(t),m.add("\n        Entráis en clase de Laura, profe de Tecnología,\n        veis que encima de la mesa tiene una caja electrónica,\n        llena de cables, para poder abrirla,\n        tendréis que cortarlos adecuadamente.\n        ¿Pero cómo sabremos cómo debemos hacerlo?\n        Afortunadamente, revolviendo en las estanterías encontráis\n        un manual de desactivación.\n    "),t=new y("sanjuan/room08_clipboard.png","sanjuan/room08_clipboard_mini.png"),m.add(t),n=new p("wirecut",{code:"302",layout:{connectorsA:["A","B","C",null,"D"],connectorsB:["O","P","Q","R","S"],wires:[{ini:"A",end:"R",color:"#4254f5"},{ini:"B",end:"O",color:"#f54242"},{ini:"C",end:"S",color:"#42f55a"},{ini:"D",end:"P",color:"#EF7F1A"}],seed:2},reseteable:!0,model:"Model ID: BKR2-2020"}),m.add(n),n.add(new S("\n        ¡GENIAL CHICOS! Ya casi no queda nada, pero no hay tiempo que perder,\n        necesitáis llegar los primeros para poder ser de los pocos que\n        puedan acudir al acto de graduación. \n    ")),n.add(new M(v,"open")),n.add(new D(10)),n.add(new Q(v)),n.add(new d("\n        Tienes que cortar los cables siguiendo el orden de colores que marcan las instrucciones.\n    ")),n.add(new d("\n        La solución es Naranja, Azul y Verde\n    ")),t=new y("sanjuan/room09.jpg"),v.add(t),v.add("\n        Habéis llegado a la última clase, la de Ana Mª,\n        tendréis que demostrar que en todos estos años habéis \n        aprendido a defenderos en otros idiomas de la mano de José Ángel,\n        Ana Mª y Félix.\n\n        Además muchos de vosotros habéis hecho el itinerario bilingüe\n        y habéis conseguido un nivel muy alto de inglés.\n    "),v.add("\n        Multiple named pictures and a notebook are the next\n        challenge you must face.\n        You have to identify the person using the notebook\n        description. \n    "),t=new y("sanjuan/room09_whois.jpg"),v.add(t),t=new y("sanjuan/room09_notebook.png","sanjuan/room09_notebook.png"),v.add(t),n=new p("text",{code:"anita"}),v.add(n),n.add(new S("\n        Enhorabuena habéis logrado superar todas las pruebas,\n        ahora deberéis ir corriendo hacía el patio,\n        la graduación está a punto de empezar,\n        y aún quedan sitios libres para vosotros. \n        Bajaís corriendo por las rampas,\n        y recordáis con cariño la cantidad de veces que vuestros profesores\n        os han reñido por bajar así, en el fondo sabéis\n        que les vais a echar de menos.\n    ")),n.add(new M(g,"open")),n.add(new D(10)),n.add(new Q(g)),n.add(new d("\n        La clave es el nombre de la única persona\n        que cumple todas las características de las frases\n    ")),n.add(new d("\n        La solución es Anita\n    ")),t=new y("sanjuan/room21.jpg"),g.add(t),g.add("\n        Os encontráis justo en la puerta del patio,\n        queréis salir pero la puerta está bloqueada,\n        y os pide una clave para poder abrirla,\n        os llama la atención un sobre que se encuentra en la puerta,\n        lo abrís y leéis detenidamente,\n        parece que alguien tiene algo que deciros.\n    "),t=new y("sanjuan/room21_cartabea.png","sanjuan/room21_cartabea.png"),g.add(t),n=new p("text",{code:"RESILIENCIA"}),g.add(n),n.add(new S("\n        Ahora sí habéis llegado al final,\n        aquí tenéis vuestro diploma\n        y nuestro agradecimiento por haber formado parte de este colegio.\n    ")),n.add(new M(b,"open")),n.add(new D(10)),n.add(new Q(b)),n.add(new P),n.add(new d("\n        Fíjate en las letras en negrita.\n    ")),n.add(new d("\n        La solución es RESILIENCIA\n    ")),b.add("\n        ¡Enhorabuena! Toda la comunidad que forma este centro está muy\n        orgullosos de vosotros. Antes de iros, el director títular\n        tiene unas palabras para vosotros.\n    "),t=new y("sanjuan/room22_carta.png","sanjuan/room22_sobre.png"),b.add(t),e=new j("¿Fin?"),e.add(new Q(A)),e.add(new M(A,"open")),b.add(e),A.add("\n        Este escape ha sido creado por la profesora Beatriz Martín Tomás \n        y el informático Javier Fresno Bausela\n        durante la pandemia del Covid-19\n        para despedir a los alumnos de 4º de E.S.O\n        y conmemorar el 50 aniversario del colegio 1970-2020.\n    "),t=new y("sanjuan/beajavi.png"),A.add(t),A.add("\n        Si has conseguido llegar hasta aquí comparte\n        una captura de pantalla en Twitter,\n        Facebook, Instagram... \n        con tu puntuación con el siguiente hashtag \n        #escapesjcmc desde las RRSS del colegio\n        compartiremos a los que consigan mayor puntuación.\n    "),r}));var q=n("a026"),J=n("8c4f"),L=(n("0808"),n("6944")),K=n.n(L),T=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:{loaded:e.loaded},attrs:{id:"app"}},[e.loaded?[a("section",{staticClass:"section"},[a("div",{staticClass:"container"},[a("img",{attrs:{src:n("f166")}}),a("h1",{staticClass:"title is-1"},[e._v("Escape Room San Juan de la Cruz")]),a("h2",{staticClass:"subtitle"},[e._v(" Un juego de escape online para poner a prueba tu ingenio y astucia resolviendo pruebas de lógica. ¿Asumirás el reto? ")]),e._m(0),a("div",{staticClass:"columns"},[a("div",{staticClass:"column"},[a("div",{staticClass:"box content"},[a("h3",{staticClass:"title is-3"},[e._v("Juego individual")]),a("p",[e._v(" Jugar usando un único ordenador. ")]),a("div",{staticClass:"has-text-centered"},[a("button",{staticClass:"button is-centered",on:{click:e.single_game}},[e._v(" Iniciar partida individual ")])])])]),a("div",{staticClass:"column"},[a("div",{staticClass:"box content"},[a("h3",{staticClass:"title is-3"},[e._v("Juego multijugador")]),a("p",[e._v(" Escape room online: comparte link con tus compañeros y resuelve los retos de forma colaborativa. ")]),a("div",{staticClass:"has-text-centered"},[a("button",{staticClass:"button",on:{click:function(t){return e.$router.push("/multiplayer")}}},[e._v(" Configurar partida multijugador ")])])])])])])])]:e._e()],2)},U=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"columns"},[a("div",{staticClass:"column"},[a("img",{attrs:{src:n("1096")}})])])}],V=n("9ab4"),G=n("60a3"),F=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(i["a"])(this,n),e=t.apply(this,arguments),e.loaded=!1,e}return Object(c["a"])(n,[{key:"mounted",value:function(){console.log("app"),this.waitLoad()}},{key:"waitLoad",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,b.preloadFolder("fonts");case 2:return e.next=4,b.preloadFolder("base");case 4:return e.next=6,b.preloadFolder("puzzles");case 6:this.loaded=!0;case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"single_game",value:function(){I.new();this.$router.push("/game")}}]),n}(G["d"]);F=Object(V["__decorate"])([Object(G["a"])({components:{}})],F);var H=F,$=H,Y=(n("2398"),n("b355"),n("2877")),X=Object(Y["a"])($,T,U,!1,null,"429d0c64",null),W=X.exports,Z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:{loaded:e.loaded},attrs:{id:"app"}},[e.loaded?[e.game?n("GameVue",{attrs:{game:e.game}}):void 0]:e._e()],2)},ee=[],te=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"game"}},[n("TopbarVue",{attrs:{game:e.game}}),e.game.current_room?n("RoomVue",{attrs:{room:e.game.current_room}}):e._e(),n("ButtonsVue",{attrs:{game:e.game}}),e.message?n("MessageVue",{attrs:{message:e.message},on:{close:function(t){e.message=null}}}):e._e()],1)},ne=[],ae=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"topbar"},[a("div",[a("a",{attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.show_info=!0}}},[a("img",{staticClass:"logo",attrs:{src:n("f166")}})])]),a("div",{staticClass:"text-center"},[a("small",[e._v("Puntos")]),a("br"),e._v(" "+e._s(e.game.points)+" ")]),a("div",{staticClass:"text-center"},[a("small",[e._v("Tiempo")]),a("br"),e._v(" "+e._s(e.time)+" ")]),e.mp_users.length?a("div",{staticClass:"user_list"},[a("div",{staticClass:"avatars"},e._l(e.mp_users,(function(t,n){return a("div",{key:"user"+n,staticClass:"user"},[a("img",{attrs:{src:e.get_avatar(t.avatar),title:t.name}})])})),0),a("div",{staticClass:"link"},[a("a",{attrs:{href:"#",title:"Copiar enlace"},on:{click:function(t){return t.preventDefault(),e.copy_mp_link(t)}}},[a("i",{staticClass:"far fa-clipboard"})])])]):a("div"),e.show_info?a("ModalVue",{on:{close:function(t){e.show_info=!1}}},[a("div",{staticClass:"box"})]):e._e()],1)},re=[],oe=(n("4d90"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"modal is-active"},[n("div",{staticClass:"modal-background",on:{click:e.close}}),n("div",{staticClass:"modal-content"},[e._t("default")],2),e.closeable?n("button",{staticClass:"modal-close is-large",attrs:{"aria-label":"close"},on:{click:e.close}}):e._e()])}),se=[],ie=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return Object(c["a"])(n,[{key:"close",value:function(){this.closeable&&this.$emit("close")}}]),n}(G["d"]);Object(V["__decorate"])([Object(G["b"])({default:!0})],ie.prototype,"closeable",void 0),ie=Object(V["__decorate"])([Object(G["a"])({components:{}})],ie);var ce=ie,ue=ce,le=(n("feac"),Object(Y["a"])(ue,oe,se,!1,null,"33b49718",null)),de=le.exports,pe=n("f904"),fe=n.n(pe),he=function(e){Object(u["a"])(a,e);var t=Object(l["a"])(a);function a(){var e;return Object(i["a"])(this,a),e=t.apply(this,arguments),e.mp_users=[],e.time="",e.show_info=!1,e.updateTimeInterval=0,e}return Object(c["a"])(a,[{key:"mounted",value:function(){var e=this;this.game.multiplayer&&(this.mp_users=this.game.multiplayer.user_data,this.game.multiplayer.onUserData((function(t){t&&(e.mp_users=t)}))),this.updateTime(),this.updateTimeInterval=setInterval(this.updateTime.bind(this),1e3)}},{key:"beforeDestroy",value:function(){clearInterval(this.updateTimeInterval)}},{key:"updateTime",value:function(){var e=this.game.end?this.game.end:new Date,t=e.getTime()-this.game.start.getTime();t=Math.floor(t/1e3);var n=t%60;t=(t-n)/60;var a=t%60;t=(t-a)/60;var r=t%99;this.time="".concat(r).padStart(2,"0")+":"+"".concat(a).padStart(2,"0")+":"+"".concat(n).padStart(2,"0")}},{key:"get_avatar",value:function(e){return e?n("74e8")("./".concat(e,"_256.png")):""}},{key:"copy_mp_link",value:function(){var e=window.location.href.split("/#/game")[0];e+="/#/multiplayer/"+this.game.multiplayer.game_id,fe()(e,{debug:!0,message:"Pulsa #{key} para copiar",format:"text/plain",onCopy:function(){console.log("Copied")}})}}]),a}(G["d"]);Object(V["__decorate"])([Object(G["b"])()],he.prototype,"game",void 0),he=Object(V["__decorate"])([Object(G["a"])({components:{ModalVue:de}})],he);var me=he,ve=me,ge=(n("deb8"),Object(Y["a"])(ve,ae,re,!1,null,"236cdb4d",null)),be=ge.exports,Ae=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"room"},[e.loaded?n("div",[n("div",{staticClass:"container"},[n("h2",{staticClass:"title"},[e._v(" "+e._s(e.room.name)+" ")]),e._l(e.room.content,(function(t,a){return["text"===t.type?n("p",{key:e.room.name+a,staticClass:"room-text",domProps:{innerHTML:e._s(t.text)}}):e._e(),"image"===t.type?n("div",{key:e.room.name+a},[n("ImageVue",{attrs:{image:t.image}})],1):e._e(),"puzzle"===t.type?n("div",{key:e.room.name+a},[n("PuzzleVue",{attrs:{puzzle:t.puzzle}})],1):e._e(),"button"===t.type?n("div",{key:e.room.name+a},[n("ButtonVue",{attrs:{button:t.button}})],1):e._e()]})),"Fin"===e.room.name?[e._v(" Si te ha gustado, no olvides pasar el juego a tus amigos ("),n("a",{attrs:{href:"https://javfres.github.io/escape-san-juan"}},[e._v("https://javfres.github.io/escape-san-juan")]),e._v("), todo el mundo puede jugar, pasar un buen rato y conocer nuestro colegio. ")]:e._e()],2)]):n("div",{staticClass:"loading"},[n("LoaderVue",{attrs:{text:"Loading room"}})],1)])},_e=[],ye=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("figure",{staticClass:"image"},[e.image.url_prev?n("img",{attrs:{src:e.image.url_prev}}):n("img",{attrs:{src:e.image.url}}),e.image.zoom?[n("button",{staticClass:"button",on:{click:function(t){e.modal=!0}}},[e._m(0)]),e.modal?n("ImageViewerVue",{attrs:{image:e.image.url},on:{close:function(t){e.modal=!1}}}):e._e()]:e._e()],2)},je=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"icon"},[n("i",{staticClass:"fas fa-search"})])}],we=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"image-viewer"},[n("ModalVue",{on:{close:e.close}},[n("div",{directives:[{name:"viewer",rawName:"v-viewer",value:e.vvconfig,expression:"vvconfig"}],staticClass:"v-viewer"},e._l(e.images,(function(e){return n("img",{key:e,attrs:{src:e}})})),0),n("div",{staticClass:"toolbar buttons is-centered"},[n("button",{staticClass:"button",on:{click:e.zoomInc}},[n("i",{staticClass:"fas fa-plus"})]),n("button",{staticClass:"button",on:{click:e.zoomDec}},[n("i",{staticClass:"fas fa-minus"})]),n("button",{staticClass:"button",on:{click:e.rotateL}},[n("i",{staticClass:"fas fa-undo-alt"})]),n("button",{staticClass:"button",on:{click:e.rotateR}},[n("i",{staticClass:"fas fa-redo-alt"})]),n("button",{staticClass:"button",on:{click:e.close}},[n("i",{staticClass:"fas fa-times"})])])])],1)},ke=[],Ce=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(i["a"])(this,n),e=t.apply(this,arguments),e.vvconfig={inline:!0,button:!1,navbar:!1,title:!1,toolbar:!1,tooltip:!1,movable:!0,zoomable:!0,rotatable:!0,scalable:!0,transition:!0,fullscreen:!1,keyboard:!1,url:"data-source"},e}return Object(c["a"])(n,[{key:"zoomInc",value:function(){this.viewer.zoom(.1)}},{key:"zoomDec",value:function(){this.viewer.zoom(-.1)}},{key:"rotateL",value:function(){this.viewer.rotate(-45)}},{key:"rotateR",value:function(){this.viewer.rotate(45)}},{key:"close",value:function(){this.$emit("close")}},{key:"images",get:function(){return Array.isArray(this.image)?this.image:[this.image]}},{key:"viewer",get:function(){var e=this.$el.querySelector(".v-viewer");return e.$viewer}}]),n}(G["d"]);Object(V["__decorate"])([Object(G["b"])()],Ce.prototype,"image",void 0),Ce=Object(V["__decorate"])([Object(G["a"])({components:{ModalVue:de}})],Ce);var Oe=Ce,Ee=Oe,xe=(n("7a9e"),Object(Y["a"])(Ee,we,ke,!1,null,"9f8456e4",null)),Be=xe.exports,Re=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(i["a"])(this,n),e=t.apply(this,arguments),e.modal=!1,e}return n}(G["d"]);Object(V["__decorate"])([Object(G["b"])()],Re.prototype,"image",void 0),Re=Object(V["__decorate"])([Object(G["a"])({components:{ImageViewerVue:Be}})],Re);var Ie=Re,ze=Ie,Me=(n("ee15"),Object(Y["a"])(ze,ye,je,!1,null,"34f8d9fc",null)),Se=Me.exports,Qe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"puzzle"},[e.puzzle.solved?n("div",{staticClass:"solved"},[e._v(" Resuelto ")]):e._e(),"combination"===e.puzzle.type?n("div",[n("CombinationLockVue",{attrs:{code:e.puzzle.config.code,tolerance:e.puzzle.config.tolerance},on:{success:e.success}})],1):"keypad"===e.puzzle.type?n("div",[n("KeypadVue",{attrs:{layout:e.puzzle.config.layout,code:e.puzzle.config.code,font:e.puzzle.config.font},on:{success:e.success}})],1):"wirecut"===e.puzzle.type?n("div",[n("WirecutVue",{attrs:{layout:e.puzzle.config.layout,code:e.puzzle.config.code,reseteable:e.puzzle.config.reseteable,model:e.puzzle.config.model},on:{success:e.success}})],1):"text"===e.puzzle.type?n("div",[n("TextVue",{attrs:{code:e.puzzle.config.code},on:{success:e.success}})],1):"laptop"===e.puzzle.type?n("div",[n("LaptopVue",{attrs:{code:e.puzzle.config.code},on:{success:e.success}})],1):"cryptex"===e.puzzle.type?[n("CryptexVue",{attrs:{code:e.puzzle.config.code},on:{success:e.success}})]:n("div",[e._v(" Unsuppored puzzle "+e._s(e.puzzle.type)+" ")]),n("div",{staticClass:"puzzle-buttons"},[e.puzzle.hints.length?n("button",{staticClass:"button",attrs:{title:"Pistas"},on:{click:function(t){e.modal_hints=!0}}},[e._m(0)]):e._e(),e._e()]),e.modal_hints?n("HintsVue",{attrs:{hints:e.puzzle.hints},on:{close:function(t){e.modal_hints=null}}}):e._e()],2)},De=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"icon"},[n("i",{staticClass:"fas fa-lightbulb"})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"icon"},[n("i",{staticClass:"fas fa-heart-broken"})])}],Ne=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"keypad"},[n("div",{staticClass:"leds"},e._l(e.leds,(function(e,t){return n("div",{key:t,staticClass:"led",class:e})})),0),n("div",{staticClass:"keypad-btns",style:e.btnsStyle},[e._l(e.layout,(function(t,a){return e._l(t,(function(t,r){return n("div",{key:a+"-"+r,staticClass:"hole"},[t?n("div",{staticClass:"btn",on:{click:function(n){return e.press(t)}}},[n("span","clear"===t?[n("i",{staticClass:"far fa-trash-alt"})]:[e._v(e._s(t))])]):e._e()])}))}))],2)])},Pe=[],qe=(n("cb29"),function(){return[["1","2","3"],["4","5","6"],["7","8","9"],["","0","clear"]]}),Je=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(i["a"])(this,n),e=t.apply(this,arguments),e.current="",e.enabled=!0,e.leds=[],e}return Object(c["a"])(n,[{key:"mounted",value:function(){this.leds=Array(this.code.length).fill(null).map((function(e){return{active:!1,success:!1,error:!1}}))}},{key:"press",value:function(e){if(this.enabled)if("clear"!==e){var t=e.substring(0,1),n=this.current.length;this.current+=t,this.leds[n].active=!0,this.current.length===this.code.length&&(this.code!==this.current?this.show_error():this.show_success())}else this.clear()}},{key:"clear",value:function(){this.current="",this.leds.forEach((function(e){return e.active=!1}))}},{key:"show_error",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.enabled=!1,this.leds.forEach((function(e){return e.active=!1})),t=0;case 3:if(!(t<3)){e.next=13;break}return this.leds.forEach((function(e){return e.error=!0})),e.next=7,f(200);case 7:return this.leds.forEach((function(e){return e.error=!1})),e.next=10,f(100);case 10:t++,e.next=3;break;case 13:this.clear(),this.enabled=!0;case 15:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"show_success",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.enabled=!1,this.leds.forEach((function(e){return e.active=!1})),this.leds.forEach((function(e){return e.success=!0})),e.next=5,f(1e3);case 5:this.$emit("success");case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"btnsStyle",get:function(){var e="grid-template-columns: repeat(".concat(this.layout[0].length,", 55px);");return this.font&&(e+="font-family: '".concat(this.font,"';")),e}}]),n}(G["d"]);Object(V["__decorate"])([Object(G["b"])({default:qe})],Je.prototype,"layout",void 0),Object(V["__decorate"])([Object(G["b"])({default:"123"})],Je.prototype,"code",void 0),Object(V["__decorate"])([Object(G["b"])({default:""})],Je.prototype,"font",void 0),Je=Object(V["__decorate"])([Object(G["a"])({components:{}})],Je);var Le=Je,Ke=Le,Te=(n("604b"),Object(Y["a"])(Ke,Ne,Pe,!1,null,"de7a57fe",null)),Ue=Te.exports,Ve=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"lock"},[a("img",{staticClass:"shackle",class:{open:e.open},attrs:{src:n("c513")}}),a("img",{attrs:{src:n("9906")}}),a("div",{ref:"dial",staticClass:"dial",class:{enabled:e.enabled}},[e._l(e.numbers,(function(t,n){return a("div",{key:"num"+t,staticClass:"lock-num",style:"transform: rotate("+360*n/e.numbers.length+"deg);"},[e._v(" "+e._s(t)+" ")])})),e._l(e.max,(function(t){return a("div",{key:"mark"+t,staticClass:"lock-mark",class:{step:t%e.step===0},style:"transform: rotate("+360*t/e.max+"deg);"},[a("div")])}))],2),e.open?e._e():a("button",{staticClass:"button reset",on:{click:e.reset}},[e._m(0)])])},Ge=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"icon"},[n("i",{staticClass:"fas fa-undo-alt"})])}],Fe=(n("70ea"),function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(i["a"])(this,n),e=t.apply(this,arguments),e.max=30,e.step=5,e.numbers=[],e.current=0,e.direction=1,e.current_code=[0],e.enabled=!0,e.open=!1,e}return Object(c["a"])(n,[{key:"mounted",value:function(){var e=0;do{this.numbers.push(e),e+=this.step}while(e<this.max);this.propeller=new window.Propeller(this.$refs.dial,{inertia:.5,onRotate:this.onRotate})}},{key:"angle",value:function(){if(!this.propeller)return 0;var e=100*(this.propeller.angle+360);return e%=36e3,e/=100,e}},{key:"onRotate",value:function(){this.current=Math.round((360-this.angle())*this.max/360)}},{key:"onChange",value:function(){if(this.enabled){var e=this.current_code.pop();(this.current-e)*this.direction>0||(this.direction*=-1,this.current_code.push(e)),this.current_code.push(this.current);var t=this.code.split("-").map((function(e){return+e}));while(this.current_code.length>t.length)this.current_code.shift();if(this.current_code.length===t.length){for(var n=!0,a=-1,r=0;r<t.length;r++){a*=-1;for(var o=!1,s=0;s<=this.tolerance;s++)t[r]===this.current_code[r]-s*a&&(o=!0);if(!o){n=!1;break}}n&&this.show_success()}}}},{key:"show_success",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.open=!0,e.next=3,f(1e3);case 3:return this.enabled=!1,e.next=6,f(2e3);case 6:this.$emit("success");case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onChangeEnabled",value:function(){this.enabled?this.propeller.bind():this.propeller.unbind()}},{key:"reset",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}return e.abrupt("return");case 2:this.enabled=!1;case 3:if(!(Math.abs(this.angle())>=2)){e.next=13;break}if(t=this.current<this.max/2?this.current:this.current-this.max,!(Math.abs(t)<2)){e.next=7;break}return e.abrupt("break",13);case 7:return n=t<0?-10:10,this.propeller.speed=n,e.next=11,f(100);case 11:e.next=3;break;case 13:this.propeller.angle=0,this.propeller.stop(),this.enabled=!0;case 16:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),n}(G["d"]));Object(V["__decorate"])([Object(G["b"])({default:"10-5-15"})],Fe.prototype,"code",void 0),Object(V["__decorate"])([Object(G["b"])({default:1})],Fe.prototype,"tolerance",void 0),Object(V["__decorate"])([Object(G["e"])("current")],Fe.prototype,"onChange",null),Object(V["__decorate"])([Object(G["e"])("enabled")],Fe.prototype,"onChangeEnabled",null),Fe=Object(V["__decorate"])([Object(G["a"])({components:{}})],Fe);var He=Fe,$e=He,Ye=(n("2fb0"),Object(Y["a"])($e,Ve,Ge,!1,null,"20e16f8e",null)),Xe=Ye.exports,We=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wirecut"},[n("div",{staticClass:"leds"},[n("div",{staticClass:"led",class:e.led1}),n("div",{staticClass:"led",class:e.led2})]),n("div",{staticClass:"content"},[n("div",{staticClass:"bg"}),n("svg",{attrs:{height:e.CONTENT_HEIGHT,width:e.CONTENT_WIDTH}},[e._l(e.wires,(function(t,a){return[t.cut?n("g",{key:"c"+a,staticClass:"cuts"},[n("path",{attrs:{d:t.cutA,stroke:t.color}}),n("path",{attrs:{d:t.cutB,stroke:t.color}})]):e._e()]})),e._l(e.wires,(function(t,a){return[t.cut?e._e():n("g",{key:"w"+a,staticClass:"wires",on:{click:function(t){return e.cutWire(a)}}},[n("path",{staticClass:"hover",attrs:{d:t.path}}),n("path",{attrs:{d:t.path,stroke:t.color}})])]}))],2),n("div",{staticClass:"sideA"},[e._l(e.layout.connectorsA,(function(e,t){return[n("div",{key:t,staticClass:"connector",class:{hidden:!e}})]}))],2),n("div",{staticClass:"space"}),n("div",{staticClass:"sideB"},[e._l(e.layout.connectorsB,(function(e,t){return[n("div",{key:t,staticClass:"connector",class:{hidden:!e}})]}))],2),e.model?n("div",{staticClass:"model"},[e._v(" "+e._s(e.model)+" ")]):e._e()])])},Ze=[];function et(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:123;e%=2147483647;var t=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;e=16807*e%2147483647;var a=(e-1)/2147483646;if(t>n){var r=[n,t];t=r[0],n=r[1]}return a*(n-t)+t};return t}var tt=function(){return{connectorsA:["A","B","C",null,"D"],connectorsB:["E","F","G"],wires:[{ini:"A",end:1,color:"#4254f5"},{ini:1,end:0,color:"#f54242"},{ini:"D",end:2,color:"#42f55a"}],seed:2}},nt=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(i["a"])(this,n),e=t.apply(this,arguments),e.current_code="",e.CONNECTOR_SIZE=20,e.CONNECTOR_MARGIN=30,e.CONTENT_WIDTH=300,e.enabled=!0,e.wires=[],e.led1={on:!0},e.led2={on:!1},e}return Object(c["a"])(n,[{key:"getConnectorIdx",value:function(e){if("string"!==typeof e)return e;for(var t=0;t<this.layout.connectorsA.length;t++)if(this.layout.connectorsA[t]===e)return t;for(var n=0;n<this.layout.connectorsB.length;n++)if(this.layout.connectorsB[n]===e)return n;return-1}},{key:"mounted",value:function(){var e=this;this.ledsUpdate();var t=et(this.layout.seed);this.wires=this.layout.wires.map((function(n){var a=function(t){return(e.CONNECTOR_SIZE+e.CONNECTOR_MARGIN)*t+e.CONNECTOR_MARGIN+e.CONNECTOR_SIZE/2},r=function(t){return e.CONNECTOR_SIZE/2+e.CONNECTOR_MARGIN+(e.CONTENT_WIDTH-e.CONNECTOR_SIZE-2*e.CONNECTOR_MARGIN)*t},o=e.getConnectorIdx(n.ini),s=e.getConnectorIdx(n.end),i=Math.min(o,s),c=Math.max(o,s),u=r(0)+" "+a(o),l=r(t(.2,.8))+" "+a(t(i-1,c+1)),d=r(1)+" "+a(s),p="M ".concat(u," Q ").concat(l," ").concat(d),f=r(t(.2,.8)),h=a(t(i,c)),m=t(r(0)+10,f-25)+" "+a(t(i,c)),v=t(f+25,r(1)-10)+" "+a(t(i,c)),g="M ".concat(u," Q ").concat(m," ").concat(f-20," ").concat(h),b="M ".concat(d," Q ").concat(v," ").concat(f+20," ").concat(h);return{path:p,cut:!1,cutA:g,cutB:b,color:n.color}}))}},{key:"ledsUpdate",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.enabled){e.next=9;break}return e.next=3,f(500);case 3:if(this.enabled){e.next=5;break}return e.abrupt("return");case 5:this.led1.on=!this.led1.on,this.led2.on=!this.led2.on,e.next=0;break;case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"cutWire",value:function(e){if(this.enabled)if(this.current_code+=e,this.wires[e].cut=!0,this.code!==this.current_code){for(var t=!0,n=0;n<this.current_code.length;n++)this.code[n]!==this.current_code[n]&&(t=!1);t||this.show_failure()}else this.show_success()}},{key:"show_success",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.enabled=!1,this.led1.on=!1,this.led2.on=!1,e.next=5,f(1e3);case 5:this.$emit("success");case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"show_failure",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.enabled=!1,this.led1.on=!0,this.led2.on=!0,t=200;case 4:if(!(t>20)){e.next=12;break}return e.next=7,f(t);case 7:this.led1.on=!this.led1.on,this.led2.on=!this.led2.on;case 9:t-=10,e.next=4;break;case 12:this.led1.on=!0,this.led2.on=!0,this.$emit("failure"),this.reseteable&&this.reset();case 16:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"reset",value:function(){var e=this;this.current_code="",this.wires.forEach((function(t,n){e.wires[n].cut=!1})),this.enabled=!0,this.led1.on=!0,this.led2.on=!1,this.ledsUpdate()}},{key:"CONTENT_HEIGHT",get:function(){var e=Math.max(this.layout.connectorsA.length,this.layout.connectorsB.length);return(this.CONNECTOR_MARGIN+this.CONNECTOR_SIZE)*e+this.CONNECTOR_MARGIN}}]),n}(G["d"]);Object(V["__decorate"])([Object(G["b"])({default:tt})],nt.prototype,"layout",void 0),Object(V["__decorate"])([Object(G["b"])({default:"012"})],nt.prototype,"code",void 0),Object(V["__decorate"])([Object(G["b"])({default:!1})],nt.prototype,"reseteable",void 0),Object(V["__decorate"])([Object(G["b"])({default:null})],nt.prototype,"model",void 0),nt=Object(V["__decorate"])([Object(G["a"])({components:{}})],nt);var at=nt,rt=at,ot=(n("a039"),Object(Y["a"])(rt,We,Ze,!1,null,"f2ce63fc",null)),st=ot.exports,it=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"puzzle-text"},[n("div",{staticClass:"field has-addons"},[n("div",{staticClass:"control has-icons-right"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.current,expression:"current"}],staticClass:"input",class:{"is-danger":e.has_error},attrs:{type:"text",placeholder:"Código"},domProps:{value:e.current},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.enter(t)},input:function(t){t.target.composing||(e.current=t.target.value)}}}),e.has_error?n("span",{staticClass:"icon is-small is-right"},[n("i",{staticClass:"fas fa-exclamation-triangle"})]):e._e()]),n("div",{staticClass:"control"},[n("button",{staticClass:"button",on:{click:e.press}},[n("i",{staticClass:"fas fa-unlock"})])])])])},ct=[],ut=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(i["a"])(this,n),e=t.apply(this,arguments),e.current="",e.has_error=!1,e}return Object(c["a"])(n,[{key:"press",value:function(){var e=this.current.toLowerCase();e=e.replace("á","a"),e=e.replace("é","e"),e=e.replace("í","i"),e=e.replace("ó","o"),e=e.replace("ú","u"),this.code.toLowerCase()!==e?this.show_error():this.show_success()}},{key:"changeCurrent",value:function(){this.has_error=!1}},{key:"show_error",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log("has error"),this.has_error=!0;case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"show_success",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f(1e3);case 2:this.$emit("success");case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"enter",value:function(){this.current&&this.press()}}]),n}(G["d"]);Object(V["__decorate"])([Object(G["b"])({default:"123"})],ut.prototype,"code",void 0),Object(V["__decorate"])([Object(G["e"])("current")],ut.prototype,"changeCurrent",null),ut=Object(V["__decorate"])([Object(G["a"])({components:{}})],ut);var lt=ut,dt=lt,pt=(n("8c25"),Object(Y["a"])(dt,it,ct,!1,null,"7b1ed600",null)),ft=pt.exports,ht=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"puzzle-laptop"},[e._m(0),n("div",{staticClass:"screen"},[e._m(1),n("input",{directives:[{name:"model",rawName:"v-model",value:e.current,expression:"current"}],class:{"is-danger":e.has_error},attrs:{type:"password",autocomplete:"off",placeholder:"password"},domProps:{value:e.current},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.enter(t)},input:function(t){t.target.composing||(e.current=t.target.value)}}}),n("button",{on:{click:e.press}},[n("i",{staticClass:"fas fa-unlock"})])])])},mt=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"img"},[a("img",{attrs:{src:n("9c84")}})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"avatar"},[n("div",[n("i",{staticClass:"fas fa-user fa-2x"})])])}],vt=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(i["a"])(this,n),e=t.apply(this,arguments),e.current="",e.has_error=!1,e}return Object(c["a"])(n,[{key:"press",value:function(){this.code.toLowerCase()!==this.current.toLowerCase()?this.show_error():this.show_success()}},{key:"changeCurrent",value:function(){this.has_error=!1}},{key:"show_error",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log("has error"),this.has_error=!0;case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"show_success",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f(1e3);case 2:this.$emit("success");case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"enter",value:function(){this.current&&this.press()}}]),n}(G["d"]);Object(V["__decorate"])([Object(G["b"])({default:"123"})],vt.prototype,"code",void 0),Object(V["__decorate"])([Object(G["e"])("current")],vt.prototype,"changeCurrent",null),vt=Object(V["__decorate"])([Object(G["a"])({components:{}})],vt);var gt=vt,bt=gt,At=(n("2e38"),Object(Y["a"])(bt,ht,mt,!1,null,"06d5c52e",null)),_t=At.exports,yt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"cryptex",staticClass:"puzzle-cryptex"},[a("div",{staticClass:"inner",style:{width:e.innerWidth+"px","transform-origin":"0 0",transform:"scale("+e.scaleCryptex+")"}},[e._m(0),a("div",{staticClass:"center"},[e._m(1),e._l(e.rings,(function(t,r){return[a("div",{key:"a"+r,staticClass:"ring"},[e._l(t.letters,(function(t,n){return a("div",{key:r+"-"+n,staticClass:"letter"},[e._v(" "+e._s(e.letter(r,n))+" ")])})),a("div",{staticClass:"up",on:{click:function(t){return e.rotate(r,!0)}}},[a("i",{staticClass:"fas fa-angle-up"})]),a("div",{staticClass:"down",on:{click:function(t){return e.rotate(r,!1)}}},[a("i",{staticClass:"fas fa-angle-down"})])],2),a("div",{key:"b"+r},[a("img",{attrs:{src:n("dd06"),draggable:"false"}})])]}))],2),e._m(2)])])},jt=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"left"},[a("img",{attrs:{src:n("18a2"),draggable:"false"}})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("img",{attrs:{src:n("dd06"),draggable:"false"}})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"right"},[a("img",{attrs:{src:n("e861"),draggable:"false"}})])}],wt=function(){return["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"]},kt=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(i["a"])(this,n),e=t.apply(this,arguments),e.rings=[],e.scaleCryptex=.5,e.enabled=!0,e}return Object(c["a"])(n,[{key:"created",value:function(){window.addEventListener("resize",this.onResize)}},{key:"destroyed",value:function(){window.removeEventListener("resize",this.onResize)}},{key:"mounted",value:function(){this.rings=Array(this.code.length).fill(null).map((function(e){return{idx:0,letters:["1","2","3","4","5","6","7"],offset:0}})),this.updateScaleCryptex()}},{key:"updateScaleCryptex",value:function(){var e=this.ref_cryptex.clientWidth/this.innerWidth;this.scaleCryptex=e}},{key:"onResize",value:function(){this.updateScaleCryptex()}},{key:"rotate",value:function(e,t){if(this.enabled){var n=this.rings[e].offset;n+=t?-1:1,n+=this.letters.length,n%=this.letters.length,this.rings[e].offset=n,this.current.toLowerCase()===this.code.toLowerCase()&&this.show_success()}}},{key:"letter",value:function(e,t){var n=-2,a=this.rings[e].offset;return a+=n+t+this.letters.length,a%=this.letters.length,this.letters[a]}},{key:"show_success",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.enabled=!1,e.next=3,f(1e3);case 3:this.$emit("success");case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"innerWidth",get:function(){var e=354+70*this.rings.length;return e}},{key:"current",get:function(){var e=this;return this.rings.map((function(t,n){return e.letter(n,2)})).join("")}}]),n}(G["d"]);Object(V["__decorate"])([Object(G["c"])("cryptex")],kt.prototype,"ref_cryptex",void 0),Object(V["__decorate"])([Object(G["b"])({default:"123"})],kt.prototype,"code",void 0),Object(V["__decorate"])([Object(G["b"])({default:wt})],kt.prototype,"letters",void 0),kt=Object(V["__decorate"])([Object(G["a"])({components:{}})],kt);var Ct=kt,Ot=Ct,Et=(n("a5fb"),Object(Y["a"])(Ot,yt,jt,!1,null,"06e45f74",null)),xt=Et.exports,Bt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"hints"},[n("ModalVue",{on:{close:e.close}},[n("div",{staticClass:"box"},[e._v(" Pistas, si las pruebas te resultan muy difíciles puedes usar estas pistas. ¡Cuidado! Restan puntos. "),n("table",{staticClass:"table"},e._l(e.hints,(function(t,a){return n("tr",{key:"hint"+a},[n("td",[n("nobr",[e._v("Pista "+e._s(a+1))])],1),t.used?n("td",[e._v(" "+e._s(t.msg)+" ")]):n("td",[a==e.idx_button?n("div",{staticClass:"bshow"},[n("button",{staticClass:"button",on:{click:function(t){return t.preventDefault(),e.click(t)}}},[e._v("Mostrar")])]):e._e(),n("div",{staticClass:"blur"},[e._v(" "+e._s(t.fake())+" ")])])])})),0)])])],1)},Rt=[],It=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return Object(c["a"])(n,[{key:"close",value:function(){this.$emit("close")}},{key:"mounted",value:function(){console.log(this.hints)}},{key:"click",value:function(){this.hints[this.idx_button].useEvent()}},{key:"idx_button",get:function(){for(var e=0;e<this.hints.length;e++)if(!this.hints[e].used)return e;return-1}}]),n}(G["d"]);Object(V["__decorate"])([Object(G["b"])()],It.prototype,"hints",void 0),It=Object(V["__decorate"])([Object(G["a"])({components:{ModalVue:de}})],It);var zt=It,Mt=zt,St=(n("bd75"),Object(Y["a"])(Mt,Bt,Rt,!1,null,"60e8d607",null)),Qt=St.exports,Dt=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(i["a"])(this,n),e=t.apply(this,arguments),e.modal_hints=!1,e}return Object(c["a"])(n,[{key:"mounted",value:function(){console.log(this.puzzle.hints)}},{key:"success",value:function(){this.puzzle.solveEvent()}}]),n}(G["d"]);Object(V["__decorate"])([Object(G["b"])()],Dt.prototype,"puzzle",void 0),Dt=Object(V["__decorate"])([Object(G["a"])({components:{KeypadVue:Ue,CombinationLockVue:Xe,WirecutVue:st,TextVue:ft,LaptopVue:_t,CryptexVue:xt,HintsVue:Qt}})],Dt);var Nt=Dt,Pt=Nt,qt=(n("67ea"),Object(Y["a"])(Pt,Qe,De,!1,null,"36cc790b",null)),Jt=qt.exports,Lt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"has-text-centered"},[n("button",{staticClass:"button",on:{click:function(t){return t.preventDefault(),e.click(t)}}},[e._v(" "+e._s(e.button.text)+" ")])])},Kt=[],Tt=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return Object(c["a"])(n,[{key:"click",value:function(){this.button.click(!1)}}]),n}(G["d"]);Object(V["__decorate"])([Object(G["b"])()],Tt.prototype,"button",void 0),Tt=Object(V["__decorate"])([Object(G["a"])({components:{}})],Tt);var Ut=Tt,Vt=Ut,Gt=Object(Y["a"])(Vt,Lt,Kt,!1,null,"72eca078",null),Ft=Gt.exports,Ht=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"loader-wrapper"},[n("div",{staticClass:"loader is-loading"}),n("div",{staticClass:"text"},[e._v(e._s(e.text))])])},$t=[],Yt=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return n}(G["d"]);Object(V["__decorate"])([Object(G["b"])({default:""})],Yt.prototype,"text",void 0),Yt=Object(V["__decorate"])([Object(G["a"])({components:{}})],Yt);var Xt=Yt,Wt=Xt,Zt=(n("a856"),Object(Y["a"])(Wt,Ht,$t,!1,null,"65d387dc",null)),en=Zt.exports,tn=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(i["a"])(this,n),e=t.apply(this,arguments),e.loaded=!1,e}return Object(c["a"])(n,[{key:"mounted",value:function(){this.waitLoad()}},{key:"waitLoad",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.room.preload();case 2:return e.next=4,f(100);case 4:this.loaded=!0;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"roomChange",value:function(){this.loaded=!1,this.waitLoad()}}]),n}(G["d"]);Object(V["__decorate"])([Object(G["b"])()],tn.prototype,"room",void 0),Object(V["__decorate"])([Object(G["e"])("room")],tn.prototype,"roomChange",null),tn=Object(V["__decorate"])([Object(G["a"])({components:{ImageVue:Se,PuzzleVue:Jt,ButtonVue:Ft,LoaderVue:en}})],tn);var nn=tn,an=nn,rn=(n("0dc5"),Object(Y["a"])(an,Ae,_e,!1,null,"43a426b4",null)),on=rn.exports,sn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"buttons-bar"},[n("div",{staticClass:"buttons has-addons is-centered"},[n("div",[n("button",{staticClass:"button",on:{click:function(t){e.show_rooms=!e.show_rooms}}},[e._m(0),n("span",[e._v(" Lugares ")])]),e.show_rooms?n("PopoverVue",{on:{close:function(t){e.show_rooms=!1}}},[n("RoomListVue",{attrs:{game:e.game},on:{change:function(t){e.show_rooms=!1}}})],1):e._e()],1)])])},cn=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"icon"},[n("i",{staticClass:"far fa-map"})])}],un=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h2",{staticClass:"title"},[e._v("Lugares")]),n("ul",[e._l(e.game.rooms,(function(t){return["open"===t.status?n("li",{key:t.name},[n("a",{attrs:{href:"#"},on:{click:function(n){return n.preventDefault(),e.changeRoom(t)}}},[e._v(e._s(t.name))]),t.name===e.game.current_room.name?n("span",[e._v(" <--- Estás aquí ")]):e._e()]):e._e()]}))],2)])},ln=[],dn=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return Object(c["a"])(n,[{key:"changeRoom",value:function(e){this.game.changeRoom(e),this.$emit("change")}}]),n}(G["d"]);Object(V["__decorate"])([Object(G["b"])()],dn.prototype,"game",void 0),dn=Object(V["__decorate"])([Object(G["a"])({components:{}})],dn);var pn=dn,fn=pn,hn=Object(Y["a"])(fn,un,ln,!1,null,"4df872ad",null),mn=hn.exports,vn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"popover"},[n("div",{staticClass:"popover-arrow"}),n("div",{staticClass:"popover-background",on:{click:e.close}}),n("div",{staticClass:"popover-content"},[e._t("default")],2)])},gn=[],bn=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return Object(c["a"])(n,[{key:"close",value:function(){this.$emit("close")}}]),n}(G["d"]);bn=Object(V["__decorate"])([Object(G["a"])({components:{}})],bn);var An=bn,_n=An,yn=(n("9275"),Object(Y["a"])(_n,vn,gn,!1,null,"1d7218a9",null)),jn=yn.exports,wn=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(i["a"])(this,n),e=t.apply(this,arguments),e.show_rooms=!1,e.show_inventory=!1,e}return n}(G["d"]);Object(V["__decorate"])([Object(G["b"])()],wn.prototype,"game",void 0),wn=Object(V["__decorate"])([Object(G["a"])({components:{RoomListVue:mn,ModalVue:de,PopoverVue:jn}})],wn);var kn=wn,Cn=kn,On=(n("a2bb"),Object(Y["a"])(Cn,sn,cn,!1,null,"44fd6c99",null)),En=On.exports,xn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mesage"},[n("ModalVue",{on:{close:e.close}},[n("div",{staticClass:"box"},e._l(e.message.content,(function(t,a){return n("p",{key:a},[e._v(" "+e._s(t)+" ")])})),0)])],1)},Bn=[],Rn=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return Object(c["a"])(n,[{key:"close",value:function(){this.$emit("close")}}]),n}(G["d"]);Object(V["__decorate"])([Object(G["b"])()],Rn.prototype,"message",void 0),Rn=Object(V["__decorate"])([Object(G["a"])({components:{ModalVue:de}})],Rn);var In=Rn,zn=In,Mn=Object(Y["a"])(zn,xn,Bn,!1,null,"51024c8c",null),Sn=Mn.exports,Qn=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(i["a"])(this,n),e=t.apply(this,arguments),e.message=null,e}return Object(c["a"])(n,[{key:"mounted",value:function(){var e=this;z.onMessage((function(t){e.message=t}))}},{key:"destroyed",value:function(){this.game.multiplayer&&this.game.multiplayer.disconnect()}}]),n}(G["d"]);Object(V["__decorate"])([Object(G["b"])()],Qn.prototype,"game",void 0),Qn=Object(V["__decorate"])([Object(G["a"])({components:{TopbarVue:be,RoomVue:on,ButtonsVue:En,MessageVue:Sn}})],Qn);var Dn=Qn,Nn=Dn,Pn=(n("784a"),Object(Y["a"])(Nn,te,ne,!1,null,"08805aea",null)),qn=Pn.exports,Jn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"puzzle-test"},[n("div",[n("h1",[e._v("Tests")]),n("div",[n("WirecutVue")],1),n("div",[n("CombinationLockVue")],1),n("div",[n("KeypadVue")],1),n("div",[n("KeypadVue",{attrs:{layout:e.keypad2_layout,code:"ABCD"}})],1),n("div",[n("KeypadVue",{attrs:{layout:e.keypad2_layout,code:"ABCD",font:"wizardspeak"}})],1)])])},Ln=[],Kn=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(i["a"])(this,n),e=t.apply(this,arguments),e.keypad2_layout=[["A","B","C","D","E"],["X","Y","Z","","clear"]],e}return Object(c["a"])(n,[{key:"mounted",value:function(){}}]),n}(G["d"]);Kn=Object(V["__decorate"])([Object(G["a"])({components:{KeypadVue:Ue,CombinationLockVue:Xe,WirecutVue:st}})],Kn);var Tn=Kn,Un=Tn,Vn=(n("e8b8"),Object(Y["a"])(Un,Jn,Ln,!1,null,"0d6fff03",null)),Gn=Vn.exports,Fn=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(i["a"])(this,n),e=t.apply(this,arguments),e.loaded=!1,e.game=null,e}return Object(c["a"])(n,[{key:"mounted",value:function(){this.waitLoad()}},{key:"waitLoad",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,b.preloadFolder("fonts");case 2:return e.next=4,b.preloadFolder("base");case 4:return e.next=6,b.preloadFolder("puzzles");case 6:return this.loaded=!0,e.prev=7,e.next=10,I.current();case 10:this.game=e.sent,e.next=17;break;case 13:e.prev=13,e.t0=e["catch"](7),console.error(e.t0),this.$router.push("/");case 17:case"end":return e.stop()}}),e,this,[[7,13]])})));function t(){return e.apply(this,arguments)}return t}()}]),n}(G["d"]);Fn=Object(V["__decorate"])([Object(G["a"])({components:{GameVue:qn,PuzzleTestVue:Gn}})],Fn);var Hn=Fn,$n=Hn,Yn=(n("b008"),Object(Y["a"])($n,Z,ee,!1,null,null,null)),Xn=Yn.exports,Wn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:{loaded:e.loaded},attrs:{id:"app"}},[e.loaded?[n("section",{staticClass:"section"},[n("div",{staticClass:"container"},[n("h1",{staticClass:"title is-1"},[e._v("Multiplayer game")]),n("h2",{staticClass:"subtitle"},[e._v(" Sala de espera multijugador ")]),e.multiplayer?n("div",[n("div",{staticClass:"link-copy"},[e._v(" Usa este link para invitar a más jugadores "),n("br"),n("div",{staticClass:"notification is-primary"},[n("span",{staticClass:"join-link"},[e._v(e._s(e.join_url))]),n("button",{staticClass:"button",on:{click:e.copy}},[n("i",{staticClass:"far fa-clipboard"})])])])]):n("p",[e.error?[e._v(" "+e._s(e.error)+" ")]:[e._v(" Connectando al servidor ... ")]],2),e.multiplayer?n("div",{staticClass:"level is-mobile player-list"},e._l([0,1,2,3],(function(t){return n("div",{key:"user-"+t,staticClass:"level-item player",class:{me:t===e.my_idx,other:t!==e.my_idx}},[e.user_list[t]?t===e.my_idx?[n("AvatarSelectorVue",{attrs:{enabled:!e.my_ready},model:{value:e.my_avatar,callback:function(t){e.my_avatar=t},expression:"my_avatar"}}),e.my_ready?n("p",[e._v(" "+e._s(e.my_name)+" ")]):n("p",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.my_name,expression:"my_name"}],attrs:{type:"text",placeholder:"Tu nombre"},domProps:{value:e.my_name},on:{input:function(t){t.target.composing||(e.my_name=t.target.value)}}})]),e.my_ready?n("p",[e._v(" Estoy listo ")]):n("button",{staticClass:"button",attrs:{disabled:e.ready_error,title:e.ready_error},on:{click:e.onReady}},[e._v("Estoy listo")])]:[n("img",{attrs:{src:e.get_avatar(e.user_list[t].avatar)}}),n("p",[e._v(e._s(e.user_list[t].name)+" ")]),n("p",[e._v(e._s(e.user_list[t].ready?"Listo":"No listo")+" ")])]:void 0],2)})),0):e._e(),e._v(" "),e.multiplayer?n("div",{staticClass:"chat"},[n("p",[e._v(" Chat: ")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.chat,expression:"chat"}],attrs:{disabled:""},domProps:{value:e.chat},on:{input:function(t){t.target.composing||(e.chat=t.target.value)}}}),e._v(" "),n("br"),n("div",{staticClass:"field has-addons"},[n("div",{staticClass:"control"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.chat_line,expression:"chat_line"}],staticClass:"input",attrs:{type:"text",placeholder:"Chat"},domProps:{value:e.chat_line},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.chat_send(t)},input:function(t){t.target.composing||(e.chat_line=t.target.value)}}})]),n("div",{staticClass:"control"},[n("a",{staticClass:"button is-primary",on:{click:e.chat_send}},[n("i",{staticClass:"fas fa-paper-plane"})])])])]):e._e()])])]:e._e()],2)},Zn=[],ea=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"avatar-selector"},[e.enabled?n("a",{staticClass:"arrow",attrs:{href:"@"},on:{click:function(t){return t.preventDefault(),e.prev(t)}}},[n("i",{staticClass:"fas fa-chevron-left"})]):e._e(),n("img",{attrs:{src:e.avatar}}),e.enabled?n("a",{staticClass:"arrow",attrs:{href:"@"},on:{click:function(t){return t.preventDefault(),e.next(t)}}},[n("i",{staticClass:"fas fa-chevron-right"})]):e._e()])},ta=[],na=["sherlock","watson","poirot","marple","mulder","scully","olivia","walter","george","nico"],aa=function(e){Object(u["a"])(a,e);var t=Object(l["a"])(a);function a(){var e;return Object(i["a"])(this,a),e=t.apply(this,arguments),e.avatars=[],e.current=0,e}return Object(c["a"])(a,[{key:"mounted",value:function(){this.avatars=na.map((function(e){return n("74e8")("./".concat(e,"_256.png"))})),this.current=Math.floor(Math.random()*this.avatars.length),this.$emit("input",na[this.current])}},{key:"prev",value:function(){var e=this.avatars.length;this.current=(this.current+e-1)%e,this.$emit("input",na[this.current])}},{key:"next",value:function(){var e=this.avatars.length;this.current=(this.current+1)%e,this.$emit("input",na[this.current])}},{key:"avatar",get:function(){return this.avatars[this.current]}}]),a}(G["d"]);Object(V["__decorate"])([Object(G["b"])({default:!0})],aa.prototype,"enabled",void 0),aa=Object(V["__decorate"])([Object(G["a"])({components:{}})],aa);var ra=aa,oa=ra,sa=(n("cf74"),Object(Y["a"])(oa,ea,ta,!1,null,"00e2a636",null)),ia=sa.exports,ca=n("d382"),ua=function(e){Object(u["a"])(a,e);var t=Object(l["a"])(a);function a(){var e;return Object(i["a"])(this,a),e=t.apply(this,arguments),e.loaded=!1,e.multiplayer=null,e.join_url="",e.user_list=[],e.my_idx=-1,e.my_name="",e.my_avatar="",e.my_ready=!1,e.error="",e.chat="",e.chat_line="",e}return Object(c["a"])(a,[{key:"mounted",value:function(){this.waitLoad();var e=this.$route.params.game_id;e?this.join_game(e):this.create_game()}},{key:"waitLoad",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,b.preloadFolder("fonts");case 2:return e.next=4,b.preloadFolder("base");case 4:return e.next=6,b.preloadFolder("puzzles");case 6:return e.next=8,b.preloadFolder("avatars");case 8:this.loaded=!0;case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"create_game",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=new R["ClientV1"](B.SERVER),e.next=3,t.create();case 3:this.multiplayer=t,this.after_joining();case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"join_game",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=new R["ClientV1"](B.SERVER),e.prev=1,e.next=4,n.join(t);case 4:this.multiplayer=n,this.after_joining(),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](1),this.error="Error conectado, quizá la sala está llena";case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"after_joining",value:function(){this.multiplayer.onUserData(this.update_game),this.join_url=window.location.href.split("/#/multiplayer")[0],this.join_url+="/#/multiplayer/"+this.multiplayer.game_id,this.multiplayer.on("chat",this.chat_recv),this.update_game()}},{key:"update_game",value:function(){var e=this;console.log("update game"),this.multiplayer&&(this.my_idx=this.multiplayer.user_idx,this.user_list=this.multiplayer.user_list.map((function(t,n){var a=e.multiplayer.user_data[n],r=a.name?a.name:"Sin nombre",o=a.avatar?a.avatar:"";return{name:r,avatar:o,ready:!!a.ready}})))}},{key:"change_name",value:function(e){this.multiplayer&&(this.multiplayer.emitUserData({name:e}),this.update_game())}},{key:"change_avatar",value:function(e){console.log("My avatar changed"),this.multiplayer&&(this.multiplayer.emitUserData({avatar:e}),this.update_game())}},{key:"get_avatar",value:function(e){return e?(console.log(e),n("74e8")("./".concat(e,"_256.png"))):""}},{key:"onReady",value:function(){this.my_ready=!0,this.multiplayer.emitUserData({ready:!0}),this.update_game()}},{key:"chat_send",value:function(){if(this.chat_line){var e=this.my_name;e||(e="Sin nombre "+this.my_idx);var t=e+": "+this.chat_line;this.chat_line="",this.multiplayer.emit("chat",t),this.chat+=t+"\n"}}},{key:"chat_recv",value:function(e){this.chat+=e+"\n"}},{key:"destroyed",value:function(){console.log("Bye bye"),this.multiplayer&&this.multiplayer.disconnect()}},{key:"check_start",value:function(){var e,t=0,n=Object(r["a"])(this.user_list);try{for(n.s();!(e=n.n()).done;){var a=e.value;a.ready&&t++}}catch(o){n.e(o)}finally{n.f()}t===this.user_list.length&&(console.log("all ready"),this.start_game())}},{key:"start_game",value:function(){var e=I.new();e.join(this.multiplayer),this.multiplayer.offUserData(this.update_game),this.multiplayer.off("chat",this.chat_recv),this.multiplayer=null,this.$router.push("/game")}},{key:"copy",value:function(){fe()(this.join_url,{debug:!0,message:"Pulsa #{key} para copiar",format:"text/plain",onCopy:function(){console.log("Copied")}})}},{key:"ready_error",get:function(){return this.my_name?null:"Nombre vacío"}}]),a}(G["d"]);Object(V["__decorate"])([Object(G["e"])("my_name"),Object(ca["Debounce"])(1e3)],ua.prototype,"change_name",null),Object(V["__decorate"])([Object(G["e"])("my_avatar"),Object(ca["Debounce"])(1e3)],ua.prototype,"change_avatar",null),Object(V["__decorate"])([Object(G["e"])("user_list",{deep:!0})],ua.prototype,"check_start",null),ua=Object(V["__decorate"])([Object(G["a"])({components:{AvatarSelectorVue:ia}})],ua);var la=ua,da=la,pa=(n("a8b3"),n("ff97"),Object(Y["a"])(da,Wn,Zn,!1,null,"5f422448",null)),fa=pa.exports;q["a"].use(K.a),q["a"].use(J["a"]);var ha=[{path:"/",component:W},{path:"/game",name:"game",component:Xn},{path:"/multiplayer",component:fa},{path:"/multiplayer/:game_id",component:fa}],ma=new J["a"]({routes:ha});q["a"].config.productionTip=!1,new q["a"]({router:ma}).$mount("#app-root")},cf74:function(e,t,n){"use strict";var a=n("87a0"),r=n.n(a);r.a},d3a4:function(e,t,n){e.exports=n.p+"img/olivia_256.2d2aedf6.png"},d945:function(e,t,n){},dd06:function(e,t,n){e.exports=n.p+"img/cryptexM.d9f7edb4.png"},deb8:function(e,t,n){"use strict";var a=n("82ad"),r=n.n(a);r.a},e018:function(e,t,n){e.exports=n.p+"img/room06.2f764544.jpg"},e2d2:function(e,t,n){},e390:function(e,t,n){e.exports=n.p+"img/room03_signos.03ffc6e8.png"},e3f4:function(e,t,n){},e861:function(e,t,n){e.exports=n.p+"img/cryptexB.2d90444a.png"},e8b8:function(e,t,n){"use strict";var a=n("ee0d"),r=n.n(a);r.a},e906:function(e,t,n){e.exports=n.p+"img/room05_tabla.322f1427.png"},ebec:function(e,t,n){},ec79:function(e,t,n){},ee0d:function(e,t,n){},ee15:function(e,t,n){"use strict";var a=n("bfdd"),r=n.n(a);r.a},eea6:function(e,t,n){e.exports=n.p+"img/room07.696d6a59.jpg"},f166:function(e,t,n){e.exports=n.p+"img/logo.d6ddf9af.svg"},f2dc:function(e,t,n){e.exports=n.p+"img/room01_bookB.da194200.png"},f3fd:function(e,t,n){e.exports=n.p+"img/nico_256.61326ac3.png"},f78f:function(e,t,n){e.exports=n.p+"img/room06_paises.6f448fd6.png"},fd45:function(e,t,n){e.exports=n.p+"img/room08.de912783.jpg"},feac:function(e,t,n){"use strict";var a=n("2383"),r=n.n(a);r.a},ff97:function(e,t,n){"use strict";var a=n("9b8f"),r=n.n(a);r.a}});
//# sourceMappingURL=app.27f849f9.js.map